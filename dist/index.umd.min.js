/**
 * react-msa-viewer 1.0.1
 * Copyright 2023, Plotly, Inc.
 * All rights reserved.
 * Licensed under the MIT license.
 * Generated: 2023-02-08
 * Version: 1.0.1
 * Source: https://github.com/plotly/react-msa-viewer
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","prop-types","react"],t):t(e.ReactMSAViewer={},e.PropTypes,e.React)}(this,function(e,t,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="default"in r?r.default:r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var r,n;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(r=e,n=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(r,n))}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}var w=t.shape({trySubscribe:t.func.isRequired,tryUnsubscribe:t.func.isRequired,notifyNestedSubs:t.func.isRequired,isSubscribed:t.func.isRequired}),_=t.shape({subscribe:t.func.isRequired,dispatch:t.func.isRequired,getState:t.func.isRequired});function S(e){var n;void 0===e&&(e="store");var o=e+"Subscription",i=function(t){m(i,t);var n=i.prototype;function i(r,n){var o;return(o=t.call(this,r,n)||this)[e]=r.store,o}return n.getChildContext=function(){var t;return(t={})[e]=this[e],t[o]=null,t},n.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return i.propTypes={store:_.isRequired,children:t.element.isRequired},i.childContextTypes=((n={})[e]=_.isRequired,n[o]=w,n),i}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}S();var E="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function k(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function x(e,t){return e(t={exports:{}},t.exports),t.exports}var C="function"==typeof Symbol&&Symbol.for,T=C?Symbol.for("react.element"):60103,q=C?Symbol.for("react.portal"):60106,M=C?Symbol.for("react.fragment"):60107,A=C?Symbol.for("react.strict_mode"):60108,R=C?Symbol.for("react.profiler"):60114,B=C?Symbol.for("react.provider"):60109,D=C?Symbol.for("react.context"):60110,W=C?Symbol.for("react.async_mode"):60111,F=C?Symbol.for("react.concurrent_mode"):60111,H=C?Symbol.for("react.forward_ref"):60112,L=C?Symbol.for("react.suspense"):60113,I=C?Symbol.for("react.suspense_list"):60120,z=C?Symbol.for("react.memo"):60115,V=C?Symbol.for("react.lazy"):60116,N=C?Symbol.for("react.block"):60121,Y=C?Symbol.for("react.fundamental"):60117,X=C?Symbol.for("react.responder"):60118,U=C?Symbol.for("react.scope"):60119;function $(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case T:switch(e=e.type){case W:case F:case M:case R:case A:case L:return e;default:switch(e=e&&e.$$typeof){case D:case H:case V:case z:case B:return e;default:return t}}case q:return t}}}function G(e){return $(e)===F}var K={AsyncMode:W,ConcurrentMode:F,ContextConsumer:D,ContextProvider:B,Element:T,ForwardRef:H,Fragment:M,Lazy:V,Memo:z,Portal:q,Profiler:R,StrictMode:A,Suspense:L,isAsyncMode:function(e){return G(e)||$(e)===W},isConcurrentMode:G,isContextConsumer:function(e){return $(e)===D},isContextProvider:function(e){return $(e)===B},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===T},isForwardRef:function(e){return $(e)===H},isFragment:function(e){return $(e)===M},isLazy:function(e){return $(e)===V},isMemo:function(e){return $(e)===z},isPortal:function(e){return $(e)===q},isProfiler:function(e){return $(e)===R},isStrictMode:function(e){return $(e)===A},isSuspense:function(e){return $(e)===L},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===M||e===F||e===R||e===A||e===L||e===I||"object"==typeof e&&null!==e&&(e.$$typeof===V||e.$$typeof===z||e.$$typeof===B||e.$$typeof===D||e.$$typeof===H||e.$$typeof===Y||e.$$typeof===X||e.$$typeof===U||e.$$typeof===N)},typeOf:$},Q=x(function(e){e.exports=K}),Z=Q.isValidElementType,J={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ee={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},te={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},re={};function ne(e){return Q.isMemo(e)?te:re[e.$$typeof]||J}re[Q.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},re[Q.Memo]=te;var oe=Object.defineProperty,ie=Object.getOwnPropertyNames,se=Object.getOwnPropertySymbols,ae=Object.getOwnPropertyDescriptor,ue=Object.getPrototypeOf,ce=Object.prototype,le=function e(t,r,n){if("string"!=typeof r){if(ce){var o=ue(r);o&&o!==ce&&e(t,o,n)}var i=ie(r);se&&(i=i.concat(se(r)));for(var s=ne(t),a=ne(r),u=0;u<i.length;++u){var c=i[u];if(!(ee[c]||n&&n[c]||a&&a[c]||s&&s[c])){var l=ae(r,c);try{oe(t,c,l)}catch(e){}}}}return t},fe=function(e,t,r,n,o,i,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,s,a],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},pe={notify:function(){}},he=function(){function e(e,t,r){this.store=e,this.parentSub=t,this.onStateChange=r,this.unsubscribe=null,this.listeners=pe}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var r=e=t,n=0;n<r.length;n++)r[n]()},get:function(){return t},subscribe:function(r){var n=!0;return t===e&&(t=e.slice()),t.push(r),function(){n&&null!==e&&(n=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(r),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=pe)},e}(),de=0,ve={};function ye(){}var be=Object.prototype.hasOwnProperty;function ge(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function me(e,t){if(ge(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!be.call(t,r[o])||!ge(e[r[o]],t[r[o]]))return!1;return!0}var we=function(e){var t,r=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}(),_e=function(){return Math.random().toString(36).substring(7).split("").join(".")},Se={INIT:"@@redux/INIT"+_e(),REPLACE:"@@redux/REPLACE"+_e(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_e()}};function je(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(je)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var r=a.indexOf(e);a.splice(r,1)}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return p({type:Se.INIT}),(n={dispatch:p,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:Se.REPLACE})}})[we]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[we]=function(){return this},e},n}function Pe(e,t){return function(){return t(e.apply(this,arguments))}}function Oe(e){return function(t,r){var n=e(t,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function Ee(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ke(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=Ee(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=Ee(o),o=n(t,r)),o},n}}function xe(e,t,r){return P({},r,e,t)}var Ce=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,o=r.pure,i=r.areMergedPropsEqual,s=!1;return function(t,r,a){var u=e(t,r,a);return s?o&&i(u,n)||(n=u):(s=!0,n=u),n}}}(e):void 0},function(e){return e?void 0:function(){return xe}}];function Te(e,t,r,n,o){var i,s,a,u,c,l=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,h=!1;return function(o,d){return h?function(o,h){var d,v,y=!f(h,s),b=!l(o,i);return i=o,s=h,y&&b?(a=e(i,s),t.dependsOnOwnProps&&(u=t(n,s)),c=r(a,u,s)):y?(e.dependsOnOwnProps&&(a=e(i,s)),t.dependsOnOwnProps&&(u=t(n,s)),c=r(a,u,s)):b?(d=e(i,s),v=!p(d,a),a=d,v&&(c=r(a,u,s)),c):c}(o,d):(a=e(i=o,s=d),u=t(n,s),c=r(a,u,s),h=!0,c)}}function qe(e,t,r){for(var n=t.length-1;n>=0;n--){var o=t[n](e);if(o)return o}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function Me(e,t){return e===t}var Ae,Re,Be,De,We,Fe,He,Le,Ie,ze,Ve,Ne=(Re=(Ae={}).connectHOC,Be=void 0===Re?function(e,t){var n,o;void 0===t&&(t={});var i=t,s=i.getDisplayName,a=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,u=i.methodName,c=void 0===u?"connectAdvanced":u,l=i.renderCountProp,f=void 0===l?void 0:l,p=i.shouldHandleStateChanges,h=void 0===p||p,d=i.storeKey,v=void 0===d?"store":d,y=i.withRef,b=void 0!==y&&y,g=O(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),S=v+"Subscription",E=de++,k=((n={})[v]=_,n[S]=w,n),x=((o={})[S]=w,o);return function(t){fe(Z(t),"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",o=a(n),i=P({},g,{getDisplayName:a,methodName:c,renderCountProp:f,shouldHandleStateChanges:h,storeKey:v,withRef:b,displayName:o,wrappedComponentName:n,WrappedComponent:t}),s=function(n){function s(e,t){var r;return(r=n.call(this,e,t)||this).version=E,r.state={},r.renderCount=0,r.store=e[v]||t[v],r.propsMode=Boolean(e[v]),r.setWrappedInstance=r.setWrappedInstance.bind(j(j(r))),fe(r.store,'Could not find "'+v+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+v+'" as a prop to "'+o+'".'),r.initSelector(),r.initSubscription(),r}m(s,n);var a=s.prototype;return a.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[S]=t||this.context[S],e},a.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.componentWillReceiveProps=function(e){this.selector.run(e)},a.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=ye,this.store=null,this.selector.run=ye,this.selector.shouldComponentUpdate=!1},a.getWrappedInstance=function(){return fe(b,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.setWrappedInstance=function(e){this.wrappedInstance=e},a.initSelector=function(){var t=e(this.store.dispatch,i);this.selector=function(e,t){var r={run:function(n){try{var o=e(t.getState(),n);(o!==r.props||r.error)&&(r.shouldComponentUpdate=!0,r.props=o,r.error=null)}catch(e){r.shouldComponentUpdate=!0,r.error=e}}};return r}(t,this.store),this.selector.run(this.props)},a.initSubscription=function(){if(h){var e=(this.propsMode?this.props:this.context)[S];this.subscription=new he(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(ve)):this.notifyNestedSubs()},a.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.addExtraProps=function(e){if(!(b||f||this.propsMode&&this.subscription))return e;var t=P({},e);return b&&(t.ref=this.setWrappedInstance),f&&(t[f]=this.renderCount++),this.propsMode&&this.subscription&&(t[S]=this.subscription),t},a.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return r.createElement(t,this.addExtraProps(e.props))},s}(r.Component);return s.WrappedComponent=t,s.displayName=o,s.childContextTypes=x,s.contextTypes=k,s.propTypes=k,le(s,t)}}:Re,We=void 0===(De=Ae.mapStateToPropsFactories)?[function(e){return"function"==typeof e?ke(e):void 0},function(e){return e?void 0:Oe(function(){return{}})}]:De,He=void 0===(Fe=Ae.mapDispatchToPropsFactories)?[function(e){return"function"==typeof e?ke(e):void 0},function(e){return e?void 0:Oe(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?Oe(function(t){return function(e,t){if("function"==typeof e)return Pe(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),n={},o=0;o<r.length;o++){var i=r[o],s=e[i];"function"==typeof s&&(n[i]=Pe(s,t))}return n}(e,t)}):void 0}]:Fe,Ie=void 0===(Le=Ae.mergePropsFactories)?Ce:Le,Ve=void 0===(ze=Ae.selectorFactory)?function(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,o=t.initMergeProps,i=O(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=r(e,i),a=n(e,i),u=o(e,i);return(i.pure?Te:function(e,t,r,n){return function(o,i){return r(e(o,i),t(n,i),i)}})(s,a,u,e,i)}:ze,function(e,t,r,n){void 0===n&&(n={});var o=n,i=o.pure,s=void 0===i||i,a=o.areStatesEqual,u=void 0===a?Me:a,c=o.areOwnPropsEqual,l=void 0===c?me:c,f=o.areStatePropsEqual,p=void 0===f?me:f,h=o.areMergedPropsEqual,d=void 0===h?me:h,v=O(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=qe(e,We,"mapStateToProps"),b=qe(t,He,"mapDispatchToProps"),g=qe(r,Ie,"mergeProps");return Be(Ve,P({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:b,initMergeProps:g,pure:s,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:p,areMergedPropsEqual:d},v))}),Ye="msaStore";function Xe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.storeKey=Ye,Ne(e,t,r,n)}function Ue(e,t){return e===t||e!=e&&t!=t}function $e(e,t){for(var r=e.length;r--;)if(Ue(e[r][0],t))return r;return-1}var Ge=Array.prototype.splice;function Ke(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ke.prototype.clear=function(){this.__data__=[],this.size=0},Ke.prototype.delete=function(e){var t=this.__data__,r=$e(t,e);return!(r<0||(r==t.length-1?t.pop():Ge.call(t,r,1),--this.size,0))},Ke.prototype.get=function(e){var t=this.__data__,r=$e(t,e);return r<0?void 0:t[r][1]},Ke.prototype.has=function(e){return $e(this.__data__,e)>-1},Ke.prototype.set=function(e,t){var r=this.__data__,n=$e(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Qe="object"==typeof global&&global&&global.Object===Object&&global,Ze="object"==typeof self&&self&&self.Object===Object&&self,Je=Qe||Ze||Function("return this")(),et=Je.Symbol,tt=Object.prototype,rt=tt.hasOwnProperty,nt=tt.toString,ot=et?et.toStringTag:void 0,it=Object.prototype.toString,st="[object Null]",at="[object Undefined]",ut=et?et.toStringTag:void 0;function ct(e){return null==e?void 0===e?at:st:ut&&ut in Object(e)?function(e){var t=rt.call(e,ot),r=e[ot];try{e[ot]=void 0}catch(e){}var n=nt.call(e);return t?e[ot]=r:delete e[ot],n}(e):function(e){return it.call(e)}(e)}function lt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ft="[object AsyncFunction]",pt="[object Function]",ht="[object GeneratorFunction]",dt="[object Proxy]";function vt(e){if(!lt(e))return!1;var t=ct(e);return t==pt||t==ht||t==ft||t==dt}var yt,bt=Je["__core-js_shared__"],gt=(yt=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",mt=Function.prototype.toString;function wt(e){if(null!=e){try{return mt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _t=/^\[object .+?Constructor\]$/,St=Function.prototype,jt=Object.prototype,Pt=St.toString,Ot=jt.hasOwnProperty,Et=RegExp("^"+Pt.call(Ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kt(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!lt(e)||(t=e,gt&&gt in t))&&(vt(e)?Et:_t).test(wt(e));var t}(r)?r:void 0}var xt=kt(Je,"Map"),Ct=kt(Object,"create"),Tt=Object.prototype.hasOwnProperty,qt=Object.prototype.hasOwnProperty;function Mt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function At(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Rt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Mt.prototype.clear=function(){this.__data__=Ct?Ct(null):{},this.size=0},Mt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mt.prototype.get=function(e){var t=this.__data__;if(Ct){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Tt.call(t,e)?t[e]:void 0},Mt.prototype.has=function(e){var t=this.__data__;return Ct?void 0!==t[e]:qt.call(t,e)},Mt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ct&&void 0===t?"__lodash_hash_undefined__":t,this},Rt.prototype.clear=function(){this.size=0,this.__data__={hash:new Mt,map:new(xt||Ke),string:new Mt}},Rt.prototype.delete=function(e){var t=At(this,e).delete(e);return this.size-=t?1:0,t},Rt.prototype.get=function(e){return At(this,e).get(e)},Rt.prototype.has=function(e){return At(this,e).has(e)},Rt.prototype.set=function(e,t){var r=At(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Bt(e){var t=this.__data__=new Ke(e);this.size=t.size}Bt.prototype.clear=function(){this.__data__=new Ke,this.size=0},Bt.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Bt.prototype.get=function(e){return this.__data__.get(e)},Bt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ke){var n=r.__data__;if(!xt||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Rt(n)}return r.set(e,t),this.size=r.size,this};var Dt=function(){try{var e=kt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function Wt(e,t,r){"__proto__"==t&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ft(e,t,r){(void 0===r||Ue(e[t],r))&&(void 0!==r||t in e)||Wt(e,t,r)}var Ht=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e},Lt="object"==typeof e&&e&&!e.nodeType&&e,It=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,zt=It&&It.exports===Lt?Je.Buffer:void 0,Vt=zt?zt.allocUnsafe:void 0;function Nt(e,t){if(t)return e.slice();var r=e.length,n=Vt?Vt(r):new e.constructor(r);return e.copy(n),n}var Yt=Je.Uint8Array;function Xt(e){var t=new e.constructor(e.byteLength);return new Yt(t).set(new Yt(e)),t}function Ut(e,t){var r=t?Xt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function $t(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Gt=Object.create,Kt=function(){function e(){}return function(t){if(!lt(t))return{};if(Gt)return Gt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Qt(e,t){return function(r){return e(t(r))}}var Zt=Qt(Object.getPrototypeOf,Object),Jt=Object.prototype;function er(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Jt)}function tr(e){return"function"!=typeof e.constructor||er(e)?{}:Kt(Zt(e))}function rr(e){return null!=e&&"object"==typeof e}var nr="[object Arguments]";function or(e){return rr(e)&&ct(e)==nr}var ir=Object.prototype,sr=ir.hasOwnProperty,ar=ir.propertyIsEnumerable,ur=or(function(){return arguments}())?or:function(e){return rr(e)&&sr.call(e,"callee")&&!ar.call(e,"callee")},cr=Array.isArray,lr=9007199254740991;function fr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=lr}function pr(e){return null!=e&&fr(e.length)&&!vt(e)}var hr="object"==typeof e&&e&&!e.nodeType&&e,dr=hr&&"object"==typeof module&&module&&!module.nodeType&&module,vr=dr&&dr.exports===hr?Je.Buffer:void 0,yr=(vr?vr.isBuffer:void 0)||function(){return!1},br="[object Object]",gr=Function.prototype,mr=Object.prototype,wr=gr.toString,_r=mr.hasOwnProperty,Sr=wr.call(Object);function jr(e){if(!rr(e)||ct(e)!=br)return!1;var t=Zt(e);if(null===t)return!0;var r=_r.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&wr.call(r)==Sr}var Pr={};function Or(e){return function(t){return e(t)}}Pr["[object Float32Array]"]=Pr["[object Float64Array]"]=Pr["[object Int8Array]"]=Pr["[object Int16Array]"]=Pr["[object Int32Array]"]=Pr["[object Uint8Array]"]=Pr["[object Uint8ClampedArray]"]=Pr["[object Uint16Array]"]=Pr["[object Uint32Array]"]=!0,Pr["[object Arguments]"]=Pr["[object Array]"]=Pr["[object ArrayBuffer]"]=Pr["[object Boolean]"]=Pr["[object DataView]"]=Pr["[object Date]"]=Pr["[object Error]"]=Pr["[object Function]"]=Pr["[object Map]"]=Pr["[object Number]"]=Pr["[object Object]"]=Pr["[object RegExp]"]=Pr["[object Set]"]=Pr["[object String]"]=Pr["[object WeakMap]"]=!1;var Er="object"==typeof e&&e&&!e.nodeType&&e,kr=Er&&"object"==typeof module&&module&&!module.nodeType&&module,xr=kr&&kr.exports===Er&&Qe.process,Cr=function(){try{return kr&&kr.require&&kr.require("util").types||xr&&xr.binding&&xr.binding("util")}catch(e){}}(),Tr=Cr&&Cr.isTypedArray,qr=Tr?Or(Tr):function(e){return rr(e)&&fr(e.length)&&!!Pr[ct(e)]};function Mr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ar=Object.prototype.hasOwnProperty;function Rr(e,t,r){var n=e[t];Ar.call(e,t)&&Ue(n,r)&&(void 0!==r||t in e)||Wt(e,t,r)}function Br(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),o?Wt(r,a,u):Rr(r,a,u)}return r}var Dr=9007199254740991,Wr=/^(?:0|[1-9]\d*)$/;function Fr(e,t){var r=typeof e;return!!(t=null==t?Dr:t)&&("number"==r||"symbol"!=r&&Wr.test(e))&&e>-1&&e%1==0&&e<t}var Hr=Object.prototype.hasOwnProperty;function Lr(e,t){var r=cr(e),n=!r&&ur(e),o=!r&&!n&&yr(e),i=!r&&!n&&!o&&qr(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=a.length;for(var c in e)!t&&!Hr.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fr(c,u))||a.push(c);return a}var Ir=Object.prototype.hasOwnProperty;function zr(e){return pr(e)?Lr(e,!0):function(e){if(!lt(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=er(e),r=[];for(var n in e)("constructor"!=n||!t&&Ir.call(e,n))&&r.push(n);return r}(e)}function Vr(e,t,r,n,o){e!==t&&Ht(t,function(i,s){if(o||(o=new Bt),lt(i))!function(e,t,r,n,o,i,s){var a=Mr(e,r),u=Mr(t,r),c=s.get(u);if(c)Ft(e,r,c);else{var l,f=i?i(a,u,r+"",e,t,s):void 0,p=void 0===f;if(p){var h=cr(u),d=!h&&yr(u),v=!h&&!d&&qr(u);f=u,h||d||v?cr(a)?f=a:rr(l=a)&&pr(l)?f=$t(a):d?(p=!1,f=Nt(u,!0)):v?(p=!1,f=Ut(u,!0)):f=[]:jr(u)||ur(u)?(f=a,ur(a)?f=Br(a,zr(a)):lt(a)&&!vt(a)||(f=tr(u))):p=!1}p&&(s.set(u,f),o(f,u,n,i,s),s.delete(u)),Ft(e,r,f)}}(e,t,s,r,Vr,n,o);else{var a=n?n(Mr(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),Ft(e,s,a)}},zr)}function Nr(e){return e}function Yr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Xr=Math.max;function Ur(e,t,r){return t=Xr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Xr(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),Yr(e,this,a)}}var $r=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Nr,Gr=800,Kr=16,Qr=Date.now;function Zr(e){var t=0,r=0;return function(){var n=Qr(),o=Kr-(n-r);if(r=n,o>0){if(++t>=Gr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jr=Zr($r);function en(e,t){return Jr(Ur(e,t,Nr),e+"")}function tn(e){return en(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,r){if(!lt(r))return!1;var n=typeof t;return!!("number"==n?pr(r)&&Fr(t,r.length):"string"==n&&t in r)&&Ue(r[t],e)}(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var rn=tn(function(e,t,r){Vr(e,t,r)}),nn=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},on=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init):this.getColor=e},sn={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},an={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},un={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},cn={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},ln={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},fn={buried:sn,buried_index:sn,cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:an,helix_propensity:an,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},purine:un,purine_pyrimidine:un,strand:cn,strand_propensity:cn,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:ln,turn_propensity:ln,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},pn={pid:{init:function(){this.cons=this.opt.conservation()},run:function(e,t){var r=this.cons[t.pos];return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"}}},hn=function(e){this.maps=dn(fn),this.dyn=dn(pn),this.opt=e};function dn(e){if(null==e||"object"!==o(e))return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}hn.getScheme=function(e){return fn[e]},hn.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!==this.dyn[e])?new on(this.dyn[e],this.opt):new nn(t)},hn.prototype.addStaticScheme=function(e,t){this.maps[e]=t},hn.prototype.addDynScheme=function(e,t){this.dyn[e]=t};var vn=new hn,yn=function(){function e(t){i(this,e),this.scheme=vn.getScheme(t)}return a(e,[{key:"getColor",value:function(e){return this.scheme.getColor(e)}}]),e}();function bn(e){return e&&"function"==typeof e.getColor}var gn=t.shape({name:t.string,sequence:t.string}),mn=t.oneOfType([t.oneOf(["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo"]),t.instanceOf(yn),function(e,t,r){if(!bn(e[t]))return new Error("Invalid prop `"+t+"` supplied to `"+r+"`. Validation failed.")}]),wn=t.shape({xPos:t.number,yPos:t.number}),_n={width:t.number,height:t.number,tileWidth:t.number,tileHeight:t.number,colorScheme:mn},Sn={width:500,height:100,tileWidth:20,tileHeight:20,colorScheme:"clustal"};function jn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i;return 0===r.length?i=n[0]:(i={},r.forEach(function(e,t){i[r[t]]=n[t]})),{type:e,payload:i}};return o.toString=function(){return e.toString()},o.key=o.toString(),o}var Pn=jn("PROPS_UPDATE"),On=jn("PROP_UPDATE","key","value"),En=jn("SEQUENCES_UPDATE"),kn={updateProp:On,updateProps:Pn,updateSequences:En};function xn(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}var Cn=Qt(Object.keys,Object),Tn=Object.prototype.hasOwnProperty;function qn(e){return pr(e)?Lr(e):function(e){if(!er(e))return Cn(e);var t=[];for(var r in Object(e))Tn.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function Mn(e,t){return e&&Ht(e,t,qn)}var An,Rn=(An=Mn,function(e,t){if(null==e)return e;if(!pr(e))return An(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e});function Bn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Rt;++t<r;)this.add(e[t])}function Dn(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}Bn.prototype.add=Bn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Bn.prototype.has=function(e){return this.__data__.has(e)};var Wn=1,Fn=2;function Hn(e,t,r,n,o,i){var s=r&Wn,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var f=-1,p=!0,h=r&Fn?new Bn:void 0;for(i.set(e,t),i.set(t,e);++f<a;){var d=e[f],v=t[f];if(n)var y=s?n(v,d,f,t,e,i):n(d,v,f,e,t,i);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!Dn(t,function(e,t){if(s=t,!h.has(s)&&(d===e||o(d,e,r,n,i)))return h.push(t);var s})){p=!1;break}}else if(d!==v&&!o(d,v,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ln(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function In(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var zn=1,Vn=2,Nn="[object Boolean]",Yn="[object Date]",Xn="[object Error]",Un="[object Map]",$n="[object Number]",Gn="[object RegExp]",Kn="[object Set]",Qn="[object String]",Zn="[object Symbol]",Jn="[object ArrayBuffer]",eo="[object DataView]",to=et?et.prototype:void 0,ro=to?to.valueOf:void 0;function no(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function oo(e,t,r){var n=t(e);return cr(e)?n:no(n,r(e))}function io(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}function so(){return[]}var ao=Object.prototype.propertyIsEnumerable,uo=Object.getOwnPropertySymbols,co=uo?function(e){return null==e?[]:(e=Object(e),io(uo(e),function(t){return ao.call(e,t)}))}:so;function lo(e){return oo(e,qn,co)}var fo=1,po=Object.prototype.hasOwnProperty,ho=kt(Je,"DataView"),vo=kt(Je,"Promise"),yo=kt(Je,"Set"),bo=kt(Je,"WeakMap"),go=wt(ho),mo=wt(xt),wo=wt(vo),_o=wt(yo),So=wt(bo),jo=ct;(ho&&"[object DataView]"!=jo(new ho(new ArrayBuffer(1)))||xt&&"[object Map]"!=jo(new xt)||vo&&"[object Promise]"!=jo(vo.resolve())||yo&&"[object Set]"!=jo(new yo)||bo&&"[object WeakMap]"!=jo(new bo))&&(jo=function(e){var t=ct(e),r="[object Object]"==t?e.constructor:void 0,n=r?wt(r):"";if(n)switch(n){case go:return"[object DataView]";case mo:return"[object Map]";case wo:return"[object Promise]";case _o:return"[object Set]";case So:return"[object WeakMap]"}return t});var Po=jo,Oo=1,Eo="[object Arguments]",ko="[object Array]",xo="[object Object]",Co=Object.prototype.hasOwnProperty;function To(e,t,r,n,o){return e===t||(null==e||null==t||!rr(e)&&!rr(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var s=cr(e),a=cr(t),u=s?ko:Po(e),c=a?ko:Po(t),l=(u=u==Eo?xo:u)==xo,f=(c=c==Eo?xo:c)==xo,p=u==c;if(p&&yr(e)){if(!yr(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new Bt),s||qr(e)?Hn(e,t,r,n,o,i):function(e,t,r,n,o,i,s){switch(u){case eo:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jn:return!(e.byteLength!=t.byteLength||!i(new Yt(e),new Yt(t)));case Nn:case Yn:case $n:return Ue(+e,+t);case Xn:return e.name==t.name&&e.message==t.message;case Gn:case Qn:return e==t+"";case Un:var a=Ln;case Kn:var c=n&zn;if(a||(a=In),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=Vn,s.set(e,t);var f=Hn(a(e),a(t),n,o,i,s);return s.delete(e),f;case Zn:if(ro)return ro.call(e)==ro.call(t)}return!1}(e,t,0,r,n,o,i);if(!(r&Oo)){var h=l&&Co.call(e,"__wrapped__"),d=f&&Co.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,y=d?t.value():t;return i||(i=new Bt),o(v,y,r,n,i)}}return!!p&&(i||(i=new Bt),function(e,t,r,n,o,i){var s=r&fo,a=lo(e),u=a.length;if(u!=lo(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:po.call(t,l)))return!1}var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);for(var d=s;++c<u;){var v=e[l=a[c]],y=t[l];if(n)var b=s?n(y,v,l,t,e,i):n(v,y,l,e,t,i);if(!(void 0===b?v===y||o(v,y,r,n,i):b)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var g=e.constructor,m=t.constructor;g!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,n,o,i))}(e,t,r,n,To,o))}var qo=1,Mo=2;function Ao(e){return e==e&&!lt(e)}function Ro(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}var Bo="[object Symbol]";function Do(e){return"symbol"==typeof e||rr(e)&&ct(e)==Bo}var Wo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fo=/^\w*$/;function Ho(e,t){if(cr(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Do(e))||Fo.test(e)||!Wo.test(e)||null!=t&&e in Object(t)}var Lo="Expected a function";function Io(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Lo);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Io.Cache||Rt),r}Io.Cache=Rt;var zo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vo=/\\(\\)?/g,No=function(e){var t=Io(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(zo,function(e,r,n,o){t.push(n?o.replace(Vo,"$1"):r||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}();function Yo(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Xo=1/0,Uo=et?et.prototype:void 0,$o=Uo?Uo.toString:void 0;function Go(e){if("string"==typeof e)return e;if(cr(e))return Yo(e,Go)+"";if(Do(e))return $o?$o.call(e):"";var t=e+"";return"0"==t&&1/e==-Xo?"-0":t}function Ko(e){return null==e?"":Go(e)}function Qo(e,t){return cr(e)?e:Ho(e,t)?[e]:No(Ko(e))}var Zo=1/0;function Jo(e){if("string"==typeof e||Do(e))return e;var t=e+"";return"0"==t&&1/e==-Zo?"-0":t}function ei(e,t){for(var r=0,n=(t=Qo(t,e)).length;null!=e&&r<n;)e=e[Jo(t[r++])];return r&&r==n?e:void 0}function ti(e,t){return null!=e&&t in Object(e)}function ri(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=Qo(t,e)).length,i=!1;++n<o;){var s=Jo(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&fr(o)&&Fr(s,o)&&(cr(e)||ur(e))}(e,t,ti)}var ni=1,oi=2;function ii(e){return"function"==typeof e?e:null==e?Nr:"object"==typeof e?cr(e)?(n=e[0],o=e[1],Ho(n)&&Ao(o)?Ro(Jo(n),o):function(e){var t=function(e,t,r){var n=null==e?void 0:ei(e,t);return void 0===n?void 0:n}(e,n);return void 0===t&&t===o?ri(e,n):To(o,t,ni|oi)}):1==(r=function(e){for(var t=qn(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Ao(o)]}return t}(t=e)).length&&r[0][2]?Ro(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var a=(s=r[o])[0],u=e[a],c=s[1];if(s[2]){if(void 0===u&&!(a in e))return!1}else{var l,f=new Bt;if(!(void 0===l?To(c,u,qo|Mo,void 0,f):l))return!1}}return!0}(e,0,r)}:function(e){return Ho(e)?(t=Jo(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ei(t,e)}}(e);var t}(e);var t,r,n,o}function si(e,t,r,n,o){return o(e,function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)}),r}function ai(e,t,r){var n=cr(e)?xn:si,o=arguments.length<3;return n(e,ii(t),r,o,Rn)}function ui(e){bn(e.colorScheme)||(e.colorScheme=new yn(e.colorScheme))}var ci,li,fi=function(e,t){var r=Object.keys(t);return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=e(n,o);if(n!==i)for(var s=0;s<r.length;s++){var a=r[s],u=t[a](i[a],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[a]=u}return i}}(function(e){var t=Object.keys(e);return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o={},i=!1,s=0;s<t.length;s++){var a=t[s],u=e[a](r[a],n);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[a]=u,i=i||u!==r[a]}return i?o:r}}({props:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case kn.updateProps.key:return e=l({},e,n),"colorScheme"in n&&ui(e),e;case kn.updateProp.key:var o=n.key;return e=l({},e,u({},o,n.value)),"colorScheme"===o&&ui(e),e;default:return void 0!==e.colorScheme&&ui(e),e}},sequences:(ci=u({},kn.updateSequences,function(e,t){var r={raw:t,length:t.length};return r.maxLength=ai(t,function(e,t){return Math.max(e,t.sequence.length)},0),r}),li=[],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;return ci.hasOwnProperty(r)?ci[r](e,n):e})}),{sequenceStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(t.type){case kn.updateProp.key:case kn.updateProps.key:case kn.updateSequences.key:if(r.props&&r.props.tileHeight&&r.props.tileWidth&&r.sequences){var n={};return n.nrXTiles=Math.ceil(r.props.width/r.props.tileWidth)+1,n.nrYTiles=Math.ceil(r.props.height/r.props.tileHeight)+1,n.fullWidth=r.props.tileWidth*r.sequences.maxLength,n.fullHeight=r.props.tileHeight*r.sequences.length,n}}return e}}),pi=function(e){t.checkPropTypes(_n,e,"prop","MSAViewer");var r=rn({},Sn,e),n=r.sequences,o=(r.position,h(r,["sequences","position"])),i=je(fi,!1);return i.dispatch(Pn(o)),i.dispatch(En(n)),i},hi=S(Ye);function di(e,t,r,n){if(!lt(e))return e;for(var o=-1,i=(t=Qo(t,e)).length,s=i-1,a=e;null!=a&&++o<i;){var u=Jo(t[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var l=a[u];void 0===(c=n?n(l,u,a):void 0)&&(c=lt(l)?l:Fr(t[o+1])?[]:{})}Rr(a,u,c),a=a[u]}return e}var vi=et?et.isConcatSpreadable:void 0;function yi(e){return cr(e)||ur(e)||!!(vi&&e&&e[vi])}function bi(e){return null!=e&&e.length?function e(t,r,n,o,i){var s=-1,a=t.length;for(n||(n=yi),i||(i=[]);++s<a;){var u=t[s];r>0&&n(u)?r>1?e(u,r-1,n,o,i):no(i,u):o||(i[i.length]=u)}return i}(e,1):[]}function gi(e){return Jr(Ur(e,void 0,bi),e+"")}var mi=gi(function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=ei(e,s);r(0,s)&&di(i,Qo(s,e),a)}return i}(e,t,function(t,r){return ri(e,r)})}(e,t)});function wi(e){return"function"==typeof e?e:Nr}function _i(e,t){return e&&Mn(e,wi(t))}var Si=x(function(e,t){t.__esModule=!0;var r=i(n),o=i(ki);function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(r){!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.__forwardedRef=(0,o.default)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.__render=function(){return null},t.prototype.getRef=function(){return this.__forwardedRef.current||this.__forwardedRef.value},t.prototype.render=function(){return this.__render(this.props,this.__forwardedRef)},t}(r.default.Component);s.displayName="ForwardRefPolyfill",t.default=s,e.exports=t.default});function ji(e){return function(){return e}}k(Si);var Pi=function(){};Pi.thatReturns=ji,Pi.thatReturnsFalse=ji(!1),Pi.thatReturnsTrue=ji(!0),Pi.thatReturnsNull=ji(null),Pi.thatReturnsThis=function(){return this},Pi.thatReturnsArgument=function(e){return e};var Oi=Pi;k(x(function(e,t){t.__esModule=!0;var r=i(n),o=(i(ki),i(Si));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i(Oi),t.default=r.default.forwardRef||function(e){return function(t){function r(){var n,o;!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=s(this,t.call.apply(t,[this].concat(a))),o.__render=e,s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r}(o.default)},e.exports=t.default}));var Ei=x(function(e,t){t.__esModule=!0,t.default=function(e){if(!e)return null;var t=e;return 1===Object.keys(t).length&&(t.hasOwnProperty("current")?t=t.current:t.hasOwnProperty("value")&&(t=t.value)),t instanceof r.default&&(t=t.getRef()),t};var r=n(Si);function n(e){return e&&e.__esModule?e:{default:e}}n(Oi),e.exports=t.default});k(Ei);var ki=x(function(e,t){t.__esModule=!0;var r=i(n),o=i(Ei);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createRef||function(){function e(t){e.current=(0,o.default)(t)||null}return e.current=null,e},e.exports=t.default}),xi=k(ki);function Ci(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.withX,c=void 0!==s&&s,h=o.withY,y=void 0!==h&&h,b=function(t){function o(e){var t;return i(this,o),u(d(d(t=v(this,p(o).call(this,e)))),"updateFromPositionStore",function(){var e=t.context.positionMSAStore.getState();t.position=t.position||{};var r=mi(e,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);e.position&&(r.xPos=e.position.xPos,r.yPos=e.position.yPos),t.el.current&&t.shouldRerender(r)?(t.position=r,t.setState({position:t.position})):(_i(r,function(e,r){t.position[r]=e}),t.el.current&&t.updateScrollPosition())}),u(d(d(t)),"shouldRerender",function(e){var r=t.el.current;if(void 0!==r.shouldRerender)return r.shouldRerender(e);var n=r.props.cacheElements;return!!(y&&Math.abs(e.currentViewSequence-t.position.lastCurrentViewSequence)>=n)||!!(c&&Math.abs(e.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)>=n)}),u(d(d(t)),"updateScrollPosition",function(){var e=t.el.current;if(e&&void 0!==e.updateScrollPosition)e.updateScrollPosition();else if(e&&e.el&&e.el.current){if(c){var r=e.props.tileWidth,n=-t.position.xPosOffset;n+=(t.position.lastCurrentViewSequencePosition-t.position.lastStartXTile)*r,t.position.currentViewSequencePosition!==t.position.lastCurrentViewSequencePosition&&(n+=(t.position.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)*r),e.el.current.scrollLeft=n}if(y){var o=e.props.tileHeight,i=-t.position.yPosOffset;i+=(t.position.lastCurrentViewSequence-t.position.lastStartYTile)*o,t.position.currentViewSequence!==t.position.lastCurrentViewSequence&&(i+=(t.position.currentViewSequence-t.position.lastCurrentViewSequence)*o),e.el.current.scrollTop=i}}}),u(d(d(t)),"dispatch",function(e){t.context.positionMSAStore.dispatch(e)}),t.el=xi(),t}return f(o,r.PureComponent),a(o,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0)}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.hasBeenInitialized||(this.updateFromPositionStore(),this.hasBeenInitialized=!0),n.createElement(e,l({ref:this.el,position:this.position,positionDispatch:this.dispatch},this.props))}}]),o}();return b.displayName="withPosition(".concat(e.displayName||e.name,")"),b.contextTypes={positionMSAStore:t.object},b}var Ti=/\s/,qi=/^\s+/;var Mi=NaN,Ai=/^[-+]0x[0-9a-f]+$/i,Ri=/^0b[01]+$/i,Bi=/^0o[0-7]+$/i,Di=parseInt;function Wi(e){if("number"==typeof e)return e;if(Do(e))return Mi;if(lt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=lt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;var r;e=(r=e)?r.slice(0,function(e){for(var t=e.length;t--&&Ti.test(e.charAt(t)););return t}(r)+1).replace(qi,""):r;var n=Ri.test(e);return n||Bi.test(e)?Di(e.slice(2),n?2:8):Ai.test(e)?Mi:+e}var Fi=1/0,Hi=1.7976931348623157e308;function Li(e){var t=function(e){return e?(e=Wi(e))===Fi||e===-Fi?(e<0?-1:1)*Hi:e==e?e:0:0===e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}var Ii,zi=Je.isFinite,Vi=Math.min,Ni=(Ii=Math.floor,function(e,t){if(e=Wi(e),(t=null==t?0:Vi(Li(t),292))&&zi(e)){var r=(Ko(e)+"e").split("e");return+((r=(Ko(Ii(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return Ii(e)});function Yi(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=Wi(r))==r?r:0),void 0!==t&&(t=(t=Wi(t))==t?t:0),function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}(Wi(e),t,r)}var Xi=jn("MAINSTORE_UPDATE"),Ui=jn("POSITION_MOVE"),$i=jn("POSITION_UPDATE"),Gi={updateMainStore:Xi,updatePosition:$i,movePosition:Ui};function Ki(e,t){var r=e.sequences.maxLength*e.props.tileWidth-e.props.width;t.xPos=Yi(t.xPos,0,r);var n=e.sequences.raw.length*e.props.tileHeight-e.props.height;return t.yPos=Yi(t.yPos,0,n),l({},e,{position:t})}var Qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e.position;switch(t.type){case Ui.key:var n=l({},r);return n.xPos+=t.payload.xMovement||0,n.yPos+=t.payload.yMovement||0,Ki(e,n);case $i.key:return Ki(e,{xPos:t.payload.xPos||r.xPos,yPos:t.payload.yPos||r.yPos});default:return e}};function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,r=e,n=e.position;switch(t.type){case Xi.key:r=l({},mi(r,["props","sequenceStats","sequences"]),t.payload);break;case $i.key:case Ui.key:n=Qi(r,t).position;break;default:return r}return l({},r,{xPosOffset:-n.xPos%r.props.tileWidth,yPosOffset:-n.yPos%r.props.tileWidth,currentViewSequence:Yi(Ni(n.yPos/r.props.tileHeight),0,r.sequences.length-1),currentViewSequencePosition:Yi(Ni(n.xPos/r.props.tileWidth),0,r.sequences.maxLength),position:n})}function Ji(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var es=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)no(t,co(e)),e=Zt(e);return t}:so;function ts(e){return oo(e,zr,es)}var rs=Object.prototype.hasOwnProperty,ns=/\w*$/,os=et?et.prototype:void 0,is=os?os.valueOf:void 0,ss="[object Boolean]",as="[object Date]",us="[object Map]",cs="[object Number]",ls="[object RegExp]",fs="[object Set]",ps="[object String]",hs="[object Symbol]",ds="[object ArrayBuffer]",vs="[object DataView]",ys="[object Float32Array]",bs="[object Float64Array]",gs="[object Int8Array]",ms="[object Int16Array]",ws="[object Int32Array]",_s="[object Uint8Array]",Ss="[object Uint8ClampedArray]",js="[object Uint16Array]",Ps="[object Uint32Array]";var Os=Cr&&Cr.isMap,Es=Os?Or(Os):function(e){return rr(e)&&"[object Map]"==Po(e)},ks=Cr&&Cr.isSet,xs=ks?Or(ks):function(e){return rr(e)&&"[object Set]"==Po(e)},Cs=1,Ts=2,qs=4,Ms="[object Arguments]",As="[object Function]",Rs="[object GeneratorFunction]",Bs="[object Object]",Ds={};function Ws(e,t,r,n,o,i){var s,a=t&Cs,u=t&Ts,c=t&qs;if(r&&(s=o?r(e,n,o,i):r(e)),void 0!==s)return s;if(!lt(e))return e;var l=cr(e);if(l){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&rs.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!a)return $t(e,s)}else{var f=Po(e),p=f==As||f==Rs;if(yr(e))return Nt(e,a);if(f==Bs||f==Ms||p&&!o){if(s=u||p?{}:tr(e),!a)return u?function(e,t){return Br(e,es(e),t)}(e,function(t,r){return t&&Br(e,zr(e),t)}(s)):function(e,t){return Br(e,co(e),t)}(e,function(t,r){return t&&Br(e,qn(e),t)}(s))}else{if(!Ds[f])return o?e:{};s=function(e,t,r){var n,o,i,s=e.constructor;switch(t){case ds:return Xt(e);case ss:case as:return new s(+e);case vs:return function(e,t){var r=t?Xt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case ys:case bs:case gs:case ms:case ws:case _s:case Ss:case js:case Ps:return Ut(e,r);case us:return new s;case cs:case ps:return new s(e);case ls:return(i=new(o=e).constructor(o.source,ns.exec(o))).lastIndex=o.lastIndex,i;case fs:return new s;case hs:return n=e,is?Object(is.call(n)):{}}}(e,f,a)}}i||(i=new Bt);var h=i.get(e);if(h)return h;i.set(e,s),xs(e)?e.forEach(function(n){s.add(Ws(n,t,r,n,e,i))}):Es(e)&&e.forEach(function(n,o){s.set(o,Ws(n,t,r,o,e,i))});var d=l?void 0:(c?u?ts:lo:u?zr:qn)(e);return Ji(d||e,function(n,o){d&&(n=e[o=n]),Rr(s,o,Ws(n,t,r,o,e,i))}),s}function Fs(e,t){return null==(e=function(e,t){return t.length<2?e:ei(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=Qo(t,e)))||delete e[Jo((r=t,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n}function Hs(e){return jr(e)?void 0:e}Ds[Ms]=Ds["[object Array]"]=Ds["[object ArrayBuffer]"]=Ds["[object DataView]"]=Ds["[object Boolean]"]=Ds["[object Date]"]=Ds["[object Float32Array]"]=Ds["[object Float64Array]"]=Ds["[object Int8Array]"]=Ds["[object Int16Array]"]=Ds["[object Int32Array]"]=Ds["[object Map]"]=Ds["[object Number]"]=Ds[Bs]=Ds["[object RegExp]"]=Ds["[object Set]"]=Ds["[object String]"]=Ds["[object Symbol]"]=Ds["[object Uint8Array]"]=Ds["[object Uint8ClampedArray]"]=Ds["[object Uint16Array]"]=Ds["[object Uint32Array]"]=!0,Ds["[object Error]"]=Ds[As]=Ds["[object WeakMap]"]=!1;var Ls=gi(function(e,t){var r={};if(null==e)return r;var n=!1;t=Yo(t,function(t){return t=Qo(t,e),n||(n=t.length>1),t}),Br(e,ts(e),r),n&&(r=Ws(r,7,Hs));for(var o=t.length;o--;)Fs(r,t[o]);return r});function Is(e,t){return To(e,t)}function zs(e,t){void 0===e.nextFrame&&(e.nextFrame=window.requestAnimationFrame(function(){t(),this.nextFrame=void 0}.bind(e)))}var Vs={sequences:"updateSequences"};Object.keys(_n).forEach(function(e){e in Vs||(Vs[e]="updateProp")});var Ns=Object.keys(Vs),Ys=function(e){return ai(e,function(e,t,r){return e[t.key]=t,e},{})},Xs=Ys(kn),Us=Ys(Gi),$s="FORWARD_SAME_PROP_NAME";var Gs=bo&&new bo,Ks=Gs?function(e,t){return Gs.set(e,t),e}:Nr;function Qs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Kt(e.prototype),n=e.apply(r,t);return lt(n)?n:r}}var Zs=1,Js=Math.max;function ea(e,t,r,n){for(var o=-1,i=e.length,s=r.length,a=-1,u=t.length,c=Js(i-s,0),l=Array(u+c),f=!n;++a<u;)l[a]=t[a];for(;++o<s;)(f||o<i)&&(l[r[o]]=e[o]);for(;c--;)l[a++]=e[o++];return l}var ta=Math.max;function ra(e,t,r,n){for(var o=-1,i=e.length,s=-1,a=r.length,u=-1,c=t.length,l=ta(i-a,0),f=Array(l+c),p=!n;++o<l;)f[o]=e[o];for(var h=o;++u<c;)f[h+u]=t[u];for(;++s<a;)(p||o<i)&&(f[h+r[s]]=e[o++]);return f}function na(){}var oa=4294967295;function ia(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oa,this.__views__=[]}ia.prototype=Kt(na.prototype),ia.prototype.constructor=ia;var sa=Gs?function(e){return Gs.get(e)}:function(){},aa={},ua=Object.prototype.hasOwnProperty;function ca(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}ca.prototype=Kt(na.prototype),ca.prototype.constructor=ca;var la=Object.prototype.hasOwnProperty;function fa(e){if(rr(e)&&!cr(e)&&!(e instanceof ia)){if(e instanceof ca)return e;if(la.call(e,"__wrapped__"))return function(e){if(e instanceof ia)return e.clone();var t=new ca(e.__wrapped__,e.__chain__);return t.__actions__=$t(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}(e)}return new ca(e)}fa.prototype=na.prototype,fa.prototype.constructor=fa;var pa=Zr(Ks),ha=/\{\n\/\* \[wrapped with (.+)\] \*/,da=/,? & /,va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ya(e){return e!=e}var ba=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function ga(e,t,r){var n=t+"";return Jr(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(va,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ji(ba,function(r){var n="_."+r[0];t&r[1]&&!function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t):function(e,t,r,n){for(var o=e.length,i=-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,ya)}(e,t)>-1}(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(ha);return t?t[1].split(da):[]}(n),r)))}var ma=1,wa=2,_a=4,Sa=8,ja=32,Pa=64;function Oa(e,t,r,n,o,i,s,a,u,c){var l=t&Sa;t|=l?ja:Pa,(t&=~(l?Pa:ja))&_a||(t&=~(ma|wa));var f=[e,t,o,l?i:void 0,l?s:void 0,l?void 0:i,l?void 0:s,a,u,c],p=r.apply(void 0,f);return function(e){var t=function(e){for(var t=e.name+"",r=aa[t],n=ua.call(aa,t)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==e)return o.name}return t}(e),r=fa[t];if("function"!=typeof r||!(t in ia.prototype))return!1;if(e===r)return!0;var n=sa(r);return!!n&&e===n[0]}(e)&&pa(p,f),p.placeholder=n,ga(p,e,t)}function Ea(e){return e.placeholder}var ka=Math.min,xa="__lodash_placeholder__";function Ca(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var s=e[r];s!==t&&s!==xa||(e[r]=xa,i[o++]=r)}return i}var Ta=1,qa=2,Ma=8,Aa=16,Ra=128,Ba=512;function Da(e,t,r,n,o,i,s,a,u,c){var l=t&Ra,f=t&Ta,p=t&qa,h=t&(Ma|Aa),d=t&Ba,v=p?void 0:Qs(e);return function y(){for(var b=arguments.length,g=Array(b),m=b;m--;)g[m]=arguments[m];if(h)var w=Ea(y),_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(g,w);if(n&&(g=ea(g,n,o,h)),i&&(g=ra(g,i,s,h)),b-=_,h&&b<c){var S=Ca(g,w);return Oa(e,t,Da,y.placeholder,r,g,S,a,u,c-b)}var j=f?r:this,P=p?j[e]:e;return b=g.length,a?g=function(e,t){for(var r=e.length,n=ka(t.length,r),o=$t(e);n--;){var i=t[n];e[n]=Fr(i,r)?o[i]:void 0}return e}(g,a):d&&b>1&&g.reverse(),l&&u<b&&(g.length=u),this&&this!==Je&&this instanceof y&&(P=v||Qs(P)),P.apply(j,g)}}var Wa=1,Fa="__lodash_placeholder__",Ha=1,La=2,Ia=4,za=8,Va=128,Na=256,Ya=Math.min,Xa="Expected a function",Ua=1,$a=2,Ga=8,Ka=16,Qa=32,Za=64,Ja=Math.max;var eu=en(function(e,t){return function(e,t,r,n,o,i,s,a){var u=t&$a;if(!u&&"function"!=typeof e)throw new TypeError(Xa);var c=n?n.length:0;if(c||(t&=~(Qa|Za),n=o=void 0),s=void 0===s?s:Ja(Li(s),0),a=void 0===a?a:Li(a),c-=o?o.length:0,t&Za){var l=n,f=o;n=o=void 0}var p=u?void 0:sa(e),h=[e,t,r,n,o,l,f,i,s,a];if(p&&function(e,t){var r=e[1],n=t[1],o=r|n,i=o<(Ha|La|Va),s=n==Va&&r==za||n==Va&&r==Na&&e[7].length<=t[8]||n==(Va|Na)&&t[7].length<=t[8]&&r==za;if(!i&&!s)return e;n&Ha&&(e[2]=t[2],o|=r&Ha?0:Ia);var a=t[3];if(a){var u=e[3];e[3]=u?ea(u,a,t[4]):a,e[4]=u?Ca(e[3],Fa):t[4]}(a=t[5])&&(u=e[5],e[5]=u?ra(u,a,t[6]):a,e[6]=u?Ca(e[5],Fa):t[6]),(a=t[7])&&(e[7]=a),n&Va&&(e[8]=null==e[8]?t[8]:Ya(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(h,p),e=h[0],t=h[1],r=h[2],n=h[3],o=h[4],!(a=h[9]=void 0===h[9]?u?0:e.length:Ja(h[9]-c,0))&&t&(Ga|Ka)&&(t&=~(Ga|Ka)),t&&t!=Ua)d=t==Ga||t==Ka?function(e,t,r){var n=Qs(e);return function o(){for(var i=arguments.length,s=Array(i),a=i,u=Ea(o);a--;)s[a]=arguments[a];var c=i<3&&s[0]!==u&&s[i-1]!==u?[]:Ca(s,u);return(i-=c.length)<r?Oa(e,t,Da,o.placeholder,void 0,s,c,void 0,void 0,r-i):Yr(this&&this!==Je&&this instanceof o?n:e,this,s)}}(e,t,a):t!=Qa&&t!=(Ua|Qa)||o.length?Da.apply(void 0,h):function(e,t,r,n){var o=t&Wa,i=Qs(e);return function t(){for(var s=-1,a=arguments.length,u=-1,c=n.length,l=Array(c+a),f=this&&this!==Je&&this instanceof t?i:e;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++s];return Yr(f,o?r:this,l)}}(e,t,r,n);else var d=function(e,t,r){var n=t&Zs,o=Qs(e);return function t(){return(this&&this!==Je&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,r);return ga((p?Ks:pa)(d,h),e,t)}(e,64,void 0,t,Ca(t,Ea(eu)))});function tu(e,t){return e===t}function ru(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tu,r=null,n=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}function nu(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,s=n.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var r=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),u=e.apply(void 0,[function(){return i++,s.apply(null,arguments)}].concat(r)),c=e(function(){for(var e=[],t=a.length,r=0;r<t;r++)e.push(a[r].apply(null,arguments));return u.apply(null,e)});return c.resultFunc=s,c.dependencies=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}eu.placeholder={};var ou=nu(ru);function iu(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==o(e)||!e||"object"!==o(t)||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!u(l))return!1;var f=e[l],p=t[l];if(!1===(i=r?r.call(n,f,p,l):void 0)||void 0===i&&f!==p)return!1}return!0}var su=nu(ru,iu);function au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];e[r]=e[r].bind(e)}}var uu=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"renderTile",value:function(e){var t=this.props.tileComponent;if(e in this.props.componentCache)return this.props.componentCache[e];var r=n.createElement(t,{key:e,index:e});return this.props.componentCache[e]=r,r}},{key:"render",value:function(){for(var e=[],t=this.props.startTile;t<this.props.endTile;t++)e.push(this.renderTile(t));return 0===e.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),n.createElement("div",null,e)}}]),t}();uu.propTypes={startTile:t.number.isRequired,endTile:t.number.isRequired,componentCache:t.func.isRequired};var cu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=xi(),r}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=(e.yPosOffset,e.tileHeight,e.currentViewSequence,e.sequences,e.height),r=(e.cacheElements,e.tileComponent,e.nrYTiles,e.position,e.positionDispatch,e.componentCache,h(e,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),o={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),s=Math.min(this.props.sequences.length,i+Math.ceil(t/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,n.createElement("div",r,n.createElement("div",{style:o,ref:this.el},n.createElement(uu,{componentCache:this.props.componentCache,startTile:i,endTile:s,tileComponent:this.props.tileComponent})))}}]),t}();cu.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileHeight:t.number.isRequired,nrYTiles:t.number.isRequired,componentCache:t.func.isRequired};var lu=Ci(cu,{withY:!0}),fu=function(e){function t(e){var r;return i(this,t),au(d(d(r=v(this,p(t).call(this,e)))),"createLabel"),r.label=su(eu(mi,r.constructor.labelProps),r.createLabel),r}return f(t,r.PureComponent),a(t,[{key:"createLabel",value:function(e){return this.cache=function(){},o=(t=e).sequences,s=t.tileHeight,u=t.labelComponent,c=t.labelStyle,d=t.labelAttributes,function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.index,r=h(e,["index"]);if(u){var i=u;return n.createElement(i,{sequence:o[t],index:t})}r.style=l({},this.props.style,{height:s},c);var a=l({},r,d);return n.createElement("div",a,o[t].name)}}]),t}();var t,o,s,u,c,d}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.dispatch,e.labelComponent,e.labelStyle,e.labelAttributes,h(e,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return n.createElement(lu,c({tileComponent:this.label(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(fu,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),fu.defaultProps={cacheElements:10,labelStyle:{}},fu.propTypes={font:t.string,labelComponent:t.oneOfType([t.object,t.func]),style:t.object,labelStyle:t.object,labelAttributes:t.object};var pu=Xe(function(e){return{height:e.props.height,tileHeight:e.props.tileHeight,sequences:e.sequences.raw,nrYTiles:e.sequenceStats.nrYTiles}})(fu),hu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=xi(),r}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.tileWidth,r=e.sequences,o=e.width,i=(e.cacheElements,e.tileComponent),s=(e.nrXTiles,e.maxLength,e.position,e.positionDispatch,e.componentCache,h(e,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),a={width:o,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=l({},this.props.style,{height:this.props.height}),f={tileWidth:t,sequences:r,tileComponent:i},p=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),d=Math.min(this.props.maxLength,p+this.props.nrXTiles+2*this.props.cacheElements),v=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=p,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,n.createElement("div",c({style:u},s),n.createElement("div",{style:a,ref:this.el},n.createElement(uu,c({},f,{componentCache:this.props.componentCache,startTile:p,endTile:d,maxWidth:v}))))}}]),t}();hu.propTypes={tileComponent:t.oneOfType([t.func,t.object]).isRequired,cacheElements:t.number.isRequired,tileWidth:t.number.isRequired,nrXTiles:t.number.isRequired,maxLength:t.number.isRequired,componentCache:t.func.isRequired};var du=Ci(hu,{withX:!0}),vu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).cache=function(){},au(d(d(r)),"createMarker"),r.marker=su(eu(mi,r.constructor.markerAttributes),r.createMarker),r}return f(t,r.PureComponent),a(t,[{key:"createMarker",value:function(e){return this.cache=function(){},o=(t=e).markerSteps,s=t.startIndex,u=t.tileWidth,t.font,c=t.markerComponent,d=t.markerStyle,y=t.markerAttributes,function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.PureComponent),a(t,[{key:"render",value:function(){var e,t=this.props,r=t.index,i=h(t,["index"]);if(c){var a=c;return n.createElement(a,{index:r})}i.style=l({width:u,display:"inline-block",textAlign:"center"},d),e=r%o==0?r+0+s:".";var f=l({},i,y);return n.createElement("div",f,e)}}]),t}();var t,o,s,u,c,d,y}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.markerSteps,e.startIndex,e.dispatch,e.markerComponent,e.markerStyle,h(e,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return n.createElement(du,c({tileComponent:this.marker(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(vu,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),vu.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},vu.propTypes={font:t.string,height:t.number,markerSteps:t.number,startIndex:t.number,markerComponent:t.oneOfType([t.object,t.func]),style:t.object,markerStyle:t.object,markerAttributes:t.object};var yu=Xe(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(vu);var bu="Expected a function";function gu(e,t){return(cr(e)?io:function(e,t){var r=[];return Rn(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r})(e,function(e){if("function"!=typeof e)throw new TypeError(bu);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(ii(t)))}function mu(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],s=t(i);if(null!=s&&(void 0===a?s==s&&!Do(s):r(s,a)))var a=s,u=i}return u}function wu(e,t){return e>t}function _u(e){return e&&e.length?mu(e,Nr,wu):void 0}function Su(e,t){return(cr(e)?Yo:function(e,t){var r=-1,n=pr(e)?Array(e.length):[];return Rn(e,function(e,o,i){n[++r]=t(e,o,i)}),n})(e,ii(t))}var ju=tn(function(e,t){Br(t,zr(t),e)});function Pu(e,t){return(cr(e)?Ji:Rn)(e,wi(t))}var Ou=function e(t,r){if(!this||this.constructor!==e)return new e(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],ju(this,r)};Ou.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},Ou.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):Pu(this.seqs,function(t,r){e===t&&this.seqs.splice(r,1)}.bind(this)),this._reset()},Ou.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},Ou.prototype.resetSeqs=function(e){if(this.seqs=[],"at"in e&&"pluck"in e){this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}else this.addSeqs(e),this._reset()};var Eu=["consensus","frequency","maxLength","ic","gaps"];Ou.prototype._reset=function(){for(var e=0;e<Eu.length;e++)this["_"+Eu[e]]=void 0;this._identity=void 0,this._background=void 0},Ou.prototype.setBackground=function(e){this._useBackground=e,this._reset()},Ou.prototype.useBackground=function(){this.setBackground(!0)},Ou.prototype.setDNA=function(){this.alphabetSize=4},Ou.prototype.setProtein=function(){this.alphabetSize=20},Eu.forEach(function(e){Ou.prototype[e]=function(){return void 0===this["_"+e]&&(this["_"+e]=this[e+"Calc"]()),this["_"+e]}}),Ou.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},Ou.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},Ou.prototype.frequencyCalc=function(e){var t,r;t=new Array(this.maxLength()),r=new Array(this.seqs.length);var n=this.ignoredChars;return void 0!==e&&e.all&&(n=[]),Pu(this.seqs,function(e){Pu(e,function(e,o){n.indexOf(e)>=0||(void 0===t[o]&&(t[o]={}),void 0===t[o][e]&&(t[o][e]=0),t[o][e]++,void 0===r[o]&&(r[o]=0),r[o]++)})}),Pu(t,function(e,n){return Pu(e,function(e,o){return t[n][o]=e/r[n]})}),this._frequency=t,t},Ou.prototype.backgroundCalc=function(){var e,t,r,n={},o=0;return Pu(this.seqs,function(e){Pu(e,function(e){return void 0===n[e]&&(n[e]=0),n[e]++,o++})}),e=n,r={},t=ii(t=function(e){return e/o}),Mn(e,function(e,n,o){Wt(r,n,t(e,n,o))}),n=r,this._background=n,n},Ou.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var r=this.ignoredChars,n=this._useBackground,o=Su(e,function(e){return ai(e,function(e,o,i){return r.indexOf(i)>=0?e:(n&&(o/=t[i]),e-o*(Math.log(o)/Math.log(2)))},0)});return this._ic=o,o},Ou.prototype.conservation=function(e){var t=this.ic(),r=this.gaps(),n=this;e=e||this.alphabetSize;var o=Math.log(e)/Math.log(2),i=0;return Su(t,function(e){var t=o-e;return n.useGaps&&(t*=1-r[i++]),t})},Ou.prototype.conservResidue=function(e){var t,r,n=e?e.alphabetSize:void 0,o=this.ignoredChars;return t=void 0!==e&&e.scaled?this.scale(this.conservation(n)):this.conservation(n),Su(this.frequency(),function(e,n){r=gu(r(e),function(e){return o.indexOf(e)>=0});var i={};return Pu(r,function(r){i[r]=e[r]*t[n]}),i})},Ou.prototype.conservResidue2=function(e){var t=this.frequency(),r=this.conservation(e),n=this.background();return Su(t,function(e,o){return Su(e,function(e){var i=ai(t[o],function(e,t){return e+t/n[o]},0);return e/n[o]/i*r[o]})})},Ou.prototype.scale=function(e,t){t=t||this.alphabetSize;var r=Math.log(t)/Math.log(2);return Su(e,function(e){return e/r})},Ou.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:_u(this.seqs).length},Ou.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return Pu(this.seqs,function(t){Pu(t,function(t,r){void 0===e[r]&&(e[r]={}),void 0===e[r][t]&&(e[r][t]=0),e[r][t]++})}),this._consensus=ai(e,function(e,t){return e+_u(Object.keys(t))},""),this._consensus},Ou.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map(function(e){for(var r=0,n=0,o=0;o<e.length;o++)"-"!==e[o]&&"-"!==t[o]&&(n++,e[o]===t[o]&&r++);return r/n}),this._identity},Ou.prototype.gapsCalc=function(){var e=this.maxLength();if(e<=1||void 0===e)return[];var t=new Array(this.maxLength());return Pu(this.seqs,function(e){Pu(e,function(e,r){void 0===t[r]&&(t[r]={g:0,t:0}),e="-"===e?"g":"t",t[r][e]++})}),this._gaps=Su(t,function(e){return e.g/(e.g+e.t)}),this._gaps};var ku=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).cache=function(){},r.initializeColumnHeights(),au(d(d(r)),"createBar"),r.bar=su(function(e){return mi(e,r.constructor.barAttributes)},r.columnHeights,r.createBar),r}return f(t,r.PureComponent),a(t,[{key:"createBar",value:function(e,t){return this.cache=function(){},function(e){var t=e.columnHeights,o=e.tileWidth,s=e.height,u=e.fillColor;return e.barStyle,e.barAttributes,function(e){function c(){return i(this,c),v(this,p(c).apply(this,arguments))}return f(c,r.PureComponent),a(c,[{key:"render",value:function(){var e=this.props,r=e.index,i=h(e,["index"]);return i.style={height:Math.round(t[r]*s),width:o,display:"inline-block",textAlign:"center",backgroundColor:u},n.createElement("div",i)}}]),c}()}(l({},e,{columnHeights:t}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=ou(function(e){return e.sequences},function(e){return e.method},function(e,t){var r,n=Ou(e.map(function(e){return e.sequence}));switch(t){case"conservation":r=n.scale(n.conservation());break;case"information-content":r=n.scale(n.ic());break;default:console.error(t+"is an invalid aggregation method for <OverviewBar />")}return r}).bind(this)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,r=(e.height,e.method,e.fillColor,e.dispatch,e.barStyle,e.barAttributes,h(e,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return n.createElement(du,c({tileComponent:this.bar(this.props),cacheElements:t,componentCache:this.cache},r))}}]),t}();u(ku,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),ku.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},ku.propTypes={method:t.oneOf(["information-content","conservation"]),height:t.number,fillColor:t.string,style:t.object,barStyle:t.object,barAttributes:t.object};var xu=Xe(function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}})(ku),Cu=function e(){i(this,e)};u(Cu,"rel",function(e){if(void 0!==e.changedTouches)return Cu.rel(e.changedTouches[0]);var t=e.offsetX,r=e.offsetY;if(void 0===t){var n=e.target||e.srcElement,o=n.getBoundingClientRect();if(t=e.clientX-o.left,r=e.clientY-o.top,void 0===t&&(t=e.pageX-n.offsetLeft,r=e.pageY-n.offsetTop,void 0===t))return}return[t,r]}),u(Cu,"abs",function(e){if(void 0!==e.changedTouches)return Cu.abs(e.changedTouches[0]);var t=e.pageX,r=e.pageY;return void 0===t&&(t=e.layerX,r=e.layerY),void 0===t&&(t=e.clientX,r=e.clientY),void 0===t&&(t=e.x,r=e.y),[t,r]}),u(Cu,"wheelDelta",function(e){var t=[e.deltaX,e.deltaY];return void 0===t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t});var Tu=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"onScroll",function(e){zs(d(d(r)),function(){var e={xMovement:r.el.current.scrollLeft-r.props.position.xPos,yMovement:r.el.current.scrollTop-r.props.position.yPos};r.props.positionDispatch(Ui(e))})}),u(d(d(r)),"updateScrollPosition",function(){r.el&&r.el.current&&(r.el.current.scrollTop=r.props.position.yPos,r.el.current.scrollLeft=r.props.position.xPos)}),r.el=xi(),r}return f(t,r.PureComponent),a(t,[{key:"checkOverflow",value:function(e,t){var r=t.withX,n=void 0!==r&&r,o=t.withY,i=void 0!==o&&o,s=!1;switch(this.props.overflow){case"auto":n&&(s|=this.props.fullWidth>this.props.width),i&&(s|=this.props.fullHeight>this.props.height);break;case"hidden":s=!1;break;case"scroll":s=!0}return s}},{key:"shouldShow",value:function(){var e={withX:!0},t={withY:!0},r="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,n="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(r,e)&&this.checkOverflow(this.props.overflow,e),showY:this.checkOverflow(n,t)&&this.checkOverflow(this.props.overflow,t)}}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,o=e.fullWidth,i=e.fullHeight,s={position:"absolute",overflowX:"auto",overflowY:"auto",width:t,height:r,transform:""},a=this.shouldShow(),u=a.showX,c=a.showY,l={height:1,width:1};return c||u?(u&&(l.width=o,s.overflowX="scroll","top"===this.props.positionX&&(s.transform+="rotateX(180deg)")),c&&(l.height=i,s.overflowY="scroll","left"===this.props.positionY&&(s.transform+="rotateY(180deg)")),n.createElement("div",{style:s,onScroll:this.onScroll,ref:this.el},n.createElement("div",{style:l}))):n.createElement("div",null)}}]),t}();Tu.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},Tu.propTypes={overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),width:t.number.isRequired,height:t.number.isRequired,fullHeight:t.number.isRequired,fullWidth:t.number.isRequired,positionX:t.oneOf(["top","bottom"]),positionY:t.oneOf(["left","right"])};var qu=Ci(Tu,{withX:!0,withY:!0}),Mu=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),u(d(d(r)),"currentContext",1),r.canvasBuffers=[xi(),xi()],r.container=xi(),au(d(d(r)),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),r.onViewpointChange(),r.mouseMovePosition=void 0,r.touchMovePosition=void 0,r.isInDragPhase=void 0,r.mouseHasMoved=void 0,r}return f(t,r.PureComponent),a(t,[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick)}},{key:"swapContexts",value:function(){var e=this.currentContext;this.canvasBuffers[e].current.style.visibility="visible";var t=(this.currentContext+1)%2;this.canvasBuffers[t].current.style.visibility="hidden",this.currentContext=t,this.ctx=this.ctxBuffers[t]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"onMouseDown",value:function(e){this.startDragPhase(e)}},{key:"onMouseMove",value:function(e){var t=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var r=Cu.abs(e),n=this.mouseMovePosition;zs(this,function(){t.mouseMovePosition=r,t.onPositionUpdate(n,t.mouseMovePosition)})}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!0})}})}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(e){this.startDragPhase(e)}},{key:"onTouchMove",value:function(e){void 0!==this.isInDragPhase&&this.onMouseMove(e)}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(e){this.mouseMovePosition=Cu.abs(e),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grabbing"})}})}},{key:"stopHoverPhase",value:function(){this.setState(function(e){return{mouse:l({},e.mouse,{isMouseWithin:!1})}})}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState(function(e){return{mouse:l({},e.mouse,{cursorState:"grab"})}})}},{key:"isEventWithinComponent",value:function(e){var t=Cu.rel(e);return 0<=t[0]&&t[0]<=this.props.width&&0<=t[1]&&t[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.stopDragPhase()}},{key:"render",value:function(){var e=l({width:this.props.width,height:this.props.height},this.props.style,{cursor:this.state.mouse.cursorState,position:"relative"}),t=this.props.showModBar&&this.state.mouse.isMouseWithin,r={position:"absolute",left:0,top:0},o=Ls(this.props,b(this.constructor.propKeys).concat(["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return n.createElement("div",c({style:e,ref:this.container},o),t&&n.createElement("div",null),n.createElement("canvas",{style:r,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),n.createElement("canvas",{style:r,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),n.createElement(qu,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}]),t}();u(Mu,"defaultProps",{engine:"canvas",showModBar:!0});var Au=function(){function e(t){i(this,e),this.el=t,this.state={}}return a(e,[{key:"updateEl",value:function(e){this.el=e}},{key:"font",value:function(e){this.state.font=e}},{key:"globalAlpha",value:function(e){this.state.globalAlpha=e}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}]),e}(),Ru=function(){function e(t){i(this,e),this.cache={},this.cacheHeight=0,this.cacheWidth=0}return a(e,[{key:"getFontTile",value:function(e,t,r,n){return t===this.cacheWidth&&r===this.cacheHeight&&n===this.font||(this.updateDimensions(t,r),this.font=n),void 0===this.cache[e]&&this.createTile(e,t,r),this.cache[e]}},{key:"createTile",value:function(e,t,r,n){var o=this.cache[e]=document.createElement("canvas");return o.width=t,o.height=r,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,r/2,t,n)}},{key:"updateDimensions",value:function(e,t){this.invalidate(),this.cacheWidth=e,this.cacheHeight=t}},{key:"invalidate",value:function(){this.cache={}}}]),e}(),Bu=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).ctx=e.getContext("2d"),r.cache=new Ru,r}return f(t,Au),a(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(e,t,r,n){this.ctx.fillRect(e,t,r,n)}},{key:"fillText",value:function(e,t,r,n,o){return this.ctx.drawImage(this.cache.getFontTile(e,n,o,this.ctx.font),t,r,n,o)}},{key:"font",value:function(e){this.ctx.font=e}},{key:"fillStyle",value:function(e){this.ctx.fillStyle=e}},{key:"globalAlpha",value:function(e){this.ctx.globalAlpha=e}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}]),t}(),Du=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).canvas=xi(),r}return f(t,r.PureComponent),a(t,[{key:"componentDidMount",value:function(){this.ctx=new Bu(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return n.createElement("div",{style:this.props.style},n.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}]),t}();u(Du,"defaultProps",{engine:"canvas"}),Du.propTypes={width:t.number.isRequired,height:t.number.isRequired,style:t.object,engine:t.oneOf(["canvas","webgl"])};var Wu=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,Du),a(t,[{key:"drawTile",value:function(e){var t=this,r=e.row,n=e.column,o=this.props.tileWidth,i=this.props.tileHeight,s=i*(r-this.props.startYTile),a=o*(n-this.props.startXTile);if(!(r>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[r].sequence;if(!(n>=u.length)){var c=u[n];if(void 0!==c){var l=this.props.colorScheme.getColor(c),f="".concat(c,"-").concat(l),p=this.props.residueTileCache.createTile({key:f,tileWidth:o,tileHeight:i,create:function(e){var o=e.canvas;return t.drawResidue({text:c,canvas:o,row:r,column:n,colorScheme:l})}});this.props.ctx.drawImage(p,0,0,o,i,a,s,o,i)}}}}},{key:"drawResidue",value:function(e){e.row,e.column;var t=e.canvas,r=e.colorScheme,n=e.text;t.globalAlpha=.7,t.fillStyle=r,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderStyle,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),t.globalAlpha=1,t.fillStyle=this.props.textColor,t.font=this.props.textFont+"px mono",t.textBaseline="middle",t.textAlign="center",t.fillText(n,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth)}},{key:"draw",value:function(e){this.props=e;for(var t=this.props.startYTile;t<this.props.endYTile;t++)for(var r=this.props.startXTile;r<this.props.endXTile;r++)this.drawTile({row:t,column:r})}}]),t}();function Fu(e,t){return e<t}var Hu=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxElements;i(this,e),this.maxElements=t||200,this.invalidate()}return a(e,[{key:"createTile",value:function(e){var t,r,n=this,o=e.key,i=e.tileWidth,s=e.tileHeight,a=e.create;if(o in this.cache)return this.cache[o].value;if(this.cachedElements>=this.maxElements){var u=(r=function(e){return n.cache[e].insertionTime},(t=Object.keys(this.cache))&&t.length?mu(t,ii(r),Fu):void 0);delete this.cache[u]}var c=document.createElement("canvas");this.cache[o]={value:c,insertionTime:Date.now()},c.width=i,c.height=s;var l=c.getContext("2d");return this.cachedElements++,a({canvas:l}),c}},{key:"updateTileSpecs",value:function(e){return!iu(e,this.spec)&&(this.invalidate(),this.spec=e,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}]),e}();function Lu(e,t){return e-e%t}var Iu=function(e){function t(e){var r;return i(this,t),u(d(d(r=v(this,p(t).call(this,e)))),"renderTile",function(e){var t=e.row,n=e.column,o=t+"-"+n;return r.tileCache.createTile({key:o,tileWidth:r.props.tileWidth*r.props.xGridSize,tileHeight:r.props.tileHeight*r.props.yGridSize,create:function(e){var o=e.canvas;r.tilingGridManager.draw(l({ctx:o,startYTile:t,startXTile:n,residueTileCache:r.residueTileCache,endYTile:t+r.props.yGridSize,endXTile:n+r.props.xGridSize},mi(r.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor"])))}})}),u(d(d(r)),"onPositionUpdate",function(e,t){var n={xMovement:e[0]-t[0],yMovement:e[1]-t[1]};r.props.positionDispatch(Ui(n))}),u(d(d(r)),"updateScrollPosition",function(){r.draw()}),u(d(d(r)),"onMouseMove",function(e){if(void 0===r.isInDragPhase&&(void 0!==r.props.onResidueMouseEnter||void 0!==r.props.onResidueMouseLeave)){var n=r.currentPointerPosition(e),o=r.currentMouseSequencePosition;Is(o,n)||(void 0!==o&&r.sendEvent("onResidueMouseLeave",o),r.currentMouseSequencePosition=n,r.sendEvent("onResidueMouseEnter",n))}y(p(t.prototype),"onMouseMove",d(r)).call(d(r),e)}),u(d(d(r)),"onMouseLeave",function(e){r.sendEvent("onResidueMouseLeave",r.currentMouseSequencePosition),r.currentMouseSequencePosition=void 0,y(p(t.prototype),"onMouseLeave",d(r)).call(d(r),e)}),u(d(d(r)),"onClick",function(e){if(!r.mouseHasMoved){var n=r.currentPointerPosition(e);r.sendEvent("onResidueClick",n)}y(p(t.prototype),"onClick",d(r)).call(d(r),e)}),u(d(d(r)),"onDoubleClick",function(e){var n=r.currentPointerPosition(e);r.sendEvent("onResidueDoubleClick",n),y(p(t.prototype),"onDoubleClick",d(r)).call(d(r),e)}),r.tileCache=new Hu,r.residueTileCache=new Hu,r.tilingGridManager=new Wu,r}return f(t,Mu),a(t,[{key:"drawScene",value:function(){var e=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(e)}},{key:"getTilePositions",value:function(){var e=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),t=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),r=Math.min(this.props.sequences.length,t+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:e,startYTile:t,endXTile:Math.min(this.props.sequences.maxLength,e+this.props.nrXTiles+2*this.props.cacheElements),endYTile:r}}},{key:"drawTiles",value:function(e){for(var t=e.startXTile,r=e.startYTile,n=e.endXTile,o=e.endYTile,i=this.props.xGridSize,s=this.props.yGridSize,a=Lu(r,s),u=Lu(t,i),c=a;c<o;c+=s)for(var l=u;l<n;l+=i){var f=this.renderTile({row:c,column:l,canvas:this.ctx}),p=i*this.props.tileWidth,h=s*this.props.tileHeight,d=(c-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,v=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,p,h,v,d,p,h)}}},{key:"positionToSequence",value:function(e){var t=this.props.sequences.raw,r=Yi(Ni((this.props.position.yPos+e.yPos)/this.props.tileHeight),0,t.length-1),n=t[r],o=Yi(Ni((this.props.position.xPos+e.xPos)/this.props.tileWidth),0,n.sequence.length-1);return{i:r,sequence:n,position:o,residue:n.sequence[o]}}},{key:"currentPointerPosition",value:function(e){var t,r,n=(t=Cu.rel(e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),o=n[0],i=n[1];return this.positionToSequence({xPos:o,yPos:i})}},{key:"sendEvent",value:function(e,t){void 0!==this.props[e]&&this.props[e](t)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var e=["tileWidth","tileHeight","colorScheme","textFont","borderColor"];this.tileCache.updateTileSpecs(mi(this.props,e.concat(["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(mi(this.props,e))}},{key:"render",value:function(){return y(p(t.prototype),"render",this).call(this)}}]),t}();Iu.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right"},Iu.propTypes={showModBar:t.bool,onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func,xGridSize:t.number.isRequired,yGridSize:t.number.isRequired,cacheElements:t.number.isRequired,border:t.bool,borderColor:t.string,borderWidth:t.number,textColor:t.string,textFont:t.string,overflow:t.oneOf(["hidden","auto","scroll"]),overflowX:t.oneOf(["hidden","auto","scroll","initial"]),overflowY:t.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:t.oneOf(["top","bottom"]),scrollBarPositionY:t.oneOf(["left","right"])},Iu.propKeys=Object.keys(Iu.propTypes);var zu=Ci(Iu,{withX:!0,withY:!0}),Vu=Xe(function(e){var t=Math.min(e.props.width,e.sequences.maxLength*e.props.tileWidth),r=Math.min(e.props.height,e.sequences.length*e.props.tileHeight);return{sequences:e.sequences,width:t,height:r,tileWidth:e.props.tileWidth,tileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme,nrXTiles:e.sequenceStats.nrXTiles,nrYTiles:e.sequenceStats.nrYTiles,fullWidth:e.sequenceStats.fullWidth,fullHeight:e.sequenceStats.fullHeight}})(zu),Nu=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return u(d(d(r=v(this,(e=p(t)).call.apply(e,[this].concat(o))))),"draw",function(){r.drawScene()}),r}return f(t,Du),a(t,[{key:"updateScrollPosition",value:function(){this._draw()}},{key:"drawScene",value:function(){this.scene={};var e=this.position;this.scene.xViewPos=e.xPos,this.scene.yViewPos=e.yPos,this.scene.xScalingFactor=1/this.props.globalTileWidth*this.props.tileWidth,this.scene.yScalingFactor=1/this.props.globalTileHeight*this.props.tileHeight,this.drawCurrentViewpoint(),this.drawSequences()}},{key:"drawSequences",value:function(){for(var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,n=this.props.sequences.raw,o=0,i=0;i<n.length;i++){var s=n[i].sequence,a=0,u=Yi(Ni(t*r),0,s.length-1);for(u=0;u<s.length;u++){var c=s[u];if(this.ctx.fillStyle(this.props.colorScheme.getColor(c)),this.ctx.globalAlpha(.5),this.ctx.fillRect(a,o,this.props.tileWidth,this.props.tileHeight),(a+=this.props.tileWidth)>this.props.globalWidth)break}if((o+=this.props.tileHeight)>this.props.height)break}}},{key:"drawCurrentViewpoint",value:function(){var e=this.scene,t=e.xViewPos,r=e.xScalingFactor,n=e.yViewPos,o=e.yScalingFactor;this.ctx.globalAlpha(.8),this.ctx.fillRect(t*r,n*o,this.props.globalWidth*r,this.props.globalHeight*o)}},{key:"render",value:function(){return y(p(t.prototype),"render",this).call(this)}}]),t}();Nu.defaultProps=l({},Du.defaultProps,{height:50,tileWidth:5,tileHeight:5}),Nu.propTypes=l({},Du.propTypes,{height:t.number,tileWidth:t.number,tileHeight:t.number});var Yu=Ci(Nu),Xu=Xe(function(e){return{sequences:e.sequences,width:e.props.width,globalWidth:e.props.width,globalHeight:e.props.height,globalTileWidth:e.props.tileWidth,globalTileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme}})(Yu),Uu=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},$u=function(e,t){return e===t||e!=e&&t!=t},Gu=function(e,t){for(var r=e.length;r--;)if($u(e[r][0],t))return r;return-1},Ku=Array.prototype.splice;function Qu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qu.prototype.clear=function(){this.__data__=[],this.size=0},Qu.prototype.delete=function(e){var t=this.__data__,r=Gu(t,e);return!(r<0||(r==t.length-1?t.pop():Ku.call(t,r,1),--this.size,0))},Qu.prototype.get=function(e){var t=this.__data__,r=Gu(t,e);return r<0?void 0:t[r][1]},Qu.prototype.has=function(e){return Gu(this.__data__,e)>-1},Qu.prototype.set=function(e,t){var r=this.__data__,n=Gu(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Zu=Qu,Ju="object"==typeof E&&E&&E.Object===Object&&E,ec="object"==typeof self&&self&&self.Object===Object&&self,tc=Ju||ec||Function("return this")(),rc=tc.Symbol,nc=Object.prototype,oc=nc.hasOwnProperty,ic=nc.toString,sc=rc?rc.toStringTag:void 0,ac=Object.prototype.toString,uc=rc?rc.toStringTag:void 0,cc=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":uc&&uc in Object(e)?function(e){var t=oc.call(e,sc),r=e[sc];try{e[sc]=void 0}catch(e){}var n=ic.call(e);return t?e[sc]=r:delete e[sc],n}(e):function(e){return ac.call(e)}(e)},lc=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},fc=function(e){if(!lc(e))return!1;var t=cc(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},pc=tc["__core-js_shared__"],hc=function(){var e=/[^.]+$/.exec(pc&&pc.keys&&pc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dc=Function.prototype.toString,vc=function(e){if(null!=e){try{return dc.call(e)}catch(e){}try{return e+""}catch(e){}}return""},yc=/^\[object .+?Constructor\]$/,bc=Function.prototype,gc=Object.prototype,mc=bc.toString,wc=gc.hasOwnProperty,_c=RegExp("^"+mc.call(wc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sc=function(e){return!(!lc(e)||(t=e,hc&&hc in t))&&(fc(e)?_c:yc).test(vc(e));var t},jc=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Sc(r)?r:void 0},Pc=jc(tc,"Map"),Oc=jc(Object,"create"),Ec=Object.prototype.hasOwnProperty,kc=Object.prototype.hasOwnProperty;function xc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xc.prototype.clear=function(){this.__data__=Oc?Oc(null):{},this.size=0},xc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xc.prototype.get=function(e){var t=this.__data__;if(Oc){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ec.call(t,e)?t[e]:void 0},xc.prototype.has=function(e){var t=this.__data__;return Oc?void 0!==t[e]:kc.call(t,e)},xc.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Oc&&void 0===t?"__lodash_hash_undefined__":t,this};var Cc=xc,Tc=function(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map};function qc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qc.prototype.clear=function(){this.size=0,this.__data__={hash:new Cc,map:new(Pc||Zu),string:new Cc}},qc.prototype.delete=function(e){var t=Tc(this,e).delete(e);return this.size-=t?1:0,t},qc.prototype.get=function(e){return Tc(this,e).get(e)},qc.prototype.has=function(e){return Tc(this,e).has(e)},qc.prototype.set=function(e,t){var r=Tc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Mc=qc;function Ac(e){var t=this.__data__=new Zu(e);this.size=t.size}Ac.prototype.clear=function(){this.__data__=new Zu,this.size=0},Ac.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ac.prototype.get=function(e){return this.__data__.get(e)},Ac.prototype.has=function(e){return this.__data__.has(e)},Ac.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Zu){var n=r.__data__;if(!Pc||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Mc(n)}return r.set(e,t),this.size=r.size,this};var Rc=Ac;function Bc(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Mc;++t<r;)this.add(e[t])}Bc.prototype.add=Bc.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Bc.prototype.has=function(e){return this.__data__.has(e)};var Dc=Bc,Wc=function(e,t,r,n,o,i){var s=1&r,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var f=-1,p=!0,h=2&r?new Dc:void 0;for(i.set(e,t),i.set(t,e);++f<a;){var d=e[f],v=t[f];if(n)var y=s?n(v,d,f,t,e,i):n(d,v,f,e,t,i);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!Uu(t,function(e,t){if(s=t,!h.has(s)&&(d===e||o(d,e,r,n,i)))return h.push(t);var s})){p=!1;break}}else if(d!==v&&!o(d,v,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p},Fc=tc.Uint8Array,Hc=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},Lc=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Ic=rc?rc.prototype:void 0,zc=Ic?Ic.valueOf:void 0,Vc=Array.isArray,Nc=Object.prototype.propertyIsEnumerable,Yc=Object.getOwnPropertySymbols,Xc=Yc?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}(Yc(e),function(t){return Nc.call(e,t)}))}:function(){return[]},Uc=function(e){return null!=e&&"object"==typeof e},$c=function(e){return Uc(e)&&"[object Arguments]"==cc(e)},Gc=Object.prototype,Kc=Gc.hasOwnProperty,Qc=Gc.propertyIsEnumerable,Zc=$c(function(){return arguments}())?$c:function(e){return Uc(e)&&Kc.call(e,"callee")&&!Qc.call(e,"callee")},Jc=function(){return!1},el=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?tc.Buffer:void 0,i=(o?o.isBuffer:void 0)||Jc;e.exports=i}),tl=/^(?:0|[1-9]\d*)$/,rl=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&tl.test(e))&&e>-1&&e%1==0&&e<t},nl=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ol={};ol["[object Float32Array]"]=ol["[object Float64Array]"]=ol["[object Int8Array]"]=ol["[object Int16Array]"]=ol["[object Int32Array]"]=ol["[object Uint8Array]"]=ol["[object Uint8ClampedArray]"]=ol["[object Uint16Array]"]=ol["[object Uint32Array]"]=!0,ol["[object Arguments]"]=ol["[object Array]"]=ol["[object ArrayBuffer]"]=ol["[object Boolean]"]=ol["[object DataView]"]=ol["[object Date]"]=ol["[object Error]"]=ol["[object Function]"]=ol["[object Map]"]=ol["[object Number]"]=ol["[object Object]"]=ol["[object RegExp]"]=ol["[object Set]"]=ol["[object String]"]=ol["[object WeakMap]"]=!1;var il=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Ju.process,i=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),sl=il&&il.isTypedArray,al=sl?function(e){return function(t){return e(t)}}(sl):function(e){return Uc(e)&&nl(e.length)&&!!ol[cc(e)]},ul=Object.prototype.hasOwnProperty,cl=function(e,t){var r=Vc(e),n=!r&&Zc(e),o=!r&&!n&&el(e),i=!r&&!n&&!o&&al(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=a.length;for(var c in e)!t&&!ul.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||rl(c,u))||a.push(c);return a},ll=Object.prototype,fl=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),pl=Object.prototype.hasOwnProperty,hl=function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||ll))return fl(e);var t,r,n=[];for(var o in Object(e))pl.call(e,o)&&"constructor"!=o&&n.push(o);return n},dl=function(e){return null!=e&&nl(e.length)&&!fc(e)},vl=function(e){return dl(e)?cl(e):hl(e)},yl=function(e){return function(e,t,r){var n=t(e);return Vc(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,vl,Xc)},bl=Object.prototype.hasOwnProperty,gl=jc(tc,"DataView"),ml=jc(tc,"Promise"),wl=jc(tc,"Set"),_l=jc(tc,"WeakMap"),Sl=vc(gl),jl=vc(Pc),Pl=vc(ml),Ol=vc(wl),El=vc(_l),kl=cc;(gl&&"[object DataView]"!=kl(new gl(new ArrayBuffer(1)))||Pc&&"[object Map]"!=kl(new Pc)||ml&&"[object Promise]"!=kl(ml.resolve())||wl&&"[object Set]"!=kl(new wl)||_l&&"[object WeakMap]"!=kl(new _l))&&(kl=function(e){var t=cc(e),r="[object Object]"==t?e.constructor:void 0,n=r?vc(r):"";if(n)switch(n){case Sl:return"[object DataView]";case jl:return"[object Map]";case Pl:return"[object Promise]";case Ol:return"[object Set]";case El:return"[object WeakMap]"}return t});var xl=kl,Cl=Object.prototype.hasOwnProperty,Tl=function(e,t,r,n,o,i){var s=Vc(e),a=Vc(t),u=s?"[object Array]":xl(e),c=a?"[object Array]":xl(t),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),p=u==c;if(p&&el(e)){if(!el(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new Rc),s||al(e)?Wc(e,t,r,n,o,i):function(e,t,r,n,o,i,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Fc(e),new Fc(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $u(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Hc;case"[object Set]":var u=1&n;if(a||(a=Lc),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var l=Wc(a(e),a(t),n,o,i,s);return s.delete(e),l;case"[object Symbol]":if(zc)return zc.call(e)==zc.call(t)}return!1}(e,t,u,r,n,o,i);if(!(1&r)){var h=l&&Cl.call(e,"__wrapped__"),d=f&&Cl.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,y=d?t.value():t;return i||(i=new Rc),o(v,y,r,n,i)}}return!!p&&(i||(i=new Rc),function(e,t,r,n,o,i){var s=1&r,a=yl(e),u=a.length;if(u!=yl(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:bl.call(t,l)))return!1}var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);for(var d=s;++c<u;){var v=e[l=a[c]],y=t[l];if(n)var b=s?n(y,v,l,t,e,i):n(v,y,l,e,t,i);if(!(void 0===b?v===y||o(v,y,r,n,i):b)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var g=e.constructor,m=t.constructor;g!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,n,o,i))},ql=function e(t,r,n,o,i){return t===r||(null==t||null==r||!Uc(t)&&!Uc(r)?t!=t&&r!=r:Tl(t,r,n,o,e,i))},Ml=function(e){return e==e&&!lc(e)},Al=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Rl=function(e){var t=function(e){for(var t=vl(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Ml(o)]}return t}(e);return 1==t.length&&t[0][2]?Al(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,s=!n;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var u=(a=r[o])[0],c=e[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Rc;if(n)var p=n(c,l,u,e,t,f);if(!(void 0===p?ql(l,c,3,n,f):p))return!1}}return!0}(r,e,t)}},Bl=function(e){return"symbol"==typeof e||Uc(e)&&"[object Symbol]"==cc(e)},Dl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wl=/^\w*$/,Fl=function(e,t){if(Vc(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Bl(e))||Wl.test(e)||!Dl.test(e)||null!=t&&e in Object(t)},Hl="Expected a function";function Ll(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Hl);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Ll.Cache||Mc),r}Ll.Cache=Mc;var Il=Ll,zl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vl=/\\(\\)?/g,Nl=function(e){var t=Il(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(zl,function(e,r,n,o){t.push(n?o.replace(Vl,"$1"):r||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(),Yl=rc?rc.prototype:void 0,Xl=Yl?Yl.toString:void 0,Ul=function e(t){if("string"==typeof t)return t;if(Vc(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if(Bl(t))return Xl?Xl.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},$l=function(e,t){return Vc(e)?e:Fl(e,t)?[e]:Nl(function(e){return null==e?"":Ul(e)}(e))},Gl=function(e){if("string"==typeof e||Bl(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Kl=function(e,t){for(var r=0,n=(t=$l(t,e)).length;null!=e&&r<n;)e=e[Gl(t[r++])];return r&&r==n?e:void 0},Ql=function(e,t){return null!=e&&t in Object(e)},Zl=function(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=$l(t,e)).length,i=!1;++n<o;){var s=Gl(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&nl(o)&&rl(s,o)&&(Vc(e)||Zc(e))}(e,t,Ql)},Jl=function(e,t){return Fl(e)&&Ml(t)?Al(Gl(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Kl(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?Zl(r,e):ql(t,n,3)}},ef=function(e){return e},tf=function(e){return Fl(e)?(t=Gl(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Kl(t,e)}}(e);var t},rf=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e},nf=function(e,t){if(null==e)return e;if(!dl(e))return function(e,t){return e&&rf(e,t,vl)}(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e},of=function(e,t){var r;return nf(e,function(e,n,o){return!(r=t(e,n,o))}),!!r},sf=function(e,t,r){var n,o=Vc(e)?Uu:of;return r&&function(e,t,r){if(!lc(r))return!1;var n=typeof t;return!!("number"==n?dl(r)&&rl(t,r.length):"string"==n&&t in r)&&$u(r[t],e)}(e,t,r)&&(t=void 0),o(e,"function"==typeof(n=t)?n:null==n?ef:"object"==typeof n?Vc(n)?Jl(n[0],n[1]):Rl(n):tf(n))},af=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,r.Component),a(t,[{key:"shouldComponentUpdate",value:function(e){var t=this;return!(iu(this.props,e)&&sf(this.props.forwardedPropsKeys.map(function(r){return iu(t.props[r],e[r])})))}}]),t}();af.propTypes={forwardPropKeys:t.array};var uf=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,af),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return n.createElement("div",{style:{display:"flex"}},n.createElement(pu,c({style:e},this.props.labelsProps)),n.createElement("div",null,n.createElement(xu,c({height:50},this.props.overviewBarProps)),n.createElement(yu,this.props.positionBarProps),n.createElement(Vu,this.props.sequenceViewerProps),n.createElement("div",{style:{height:10}})))}}]),t}();uf.propTypes=l({},af.propTypes);var cf=Xe(function(e){return{tileHeight:e.props.tileHeight}})(uf),lf=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,af),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return n.createElement("div",{style:{display:"flex"}},n.createElement("div",null,n.createElement(xu,c({height:50},this.props.overviewBarProps)),n.createElement(yu,this.props.positionBarProps),n.createElement(Vu,this.props.sequenceViewerProps)),n.createElement(pu,c({style:e},this.props.labelsProps)))}}]),t}();lf.propTypes=l({},af.propTypes);var ff=Xe(function(e){return{tileHeight:e.props.tileHeight}})(lf),pf=function(e){function t(){return i(this,t),v(this,p(t).apply(this,arguments))}return f(t,af),a(t,[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight};return n.createElement("div",{style:{display:"flex"}},n.createElement(pu,{style:e}),n.createElement("div",null,n.createElement(yu,this.props.positionBarProps),n.createElement(Vu,this.props.sequenceViewerProps),n.createElement(yu,this.props.positionBarProps),n.createElement(xu,this.props.overviewBarProps),n.createElement("br",null),n.createElement(yu,this.props.positionBarProps)),n.createElement(pu,c({style:e},this.props.labelsProps)))}}]),t}();pf.propTypes=l({},af.propTypes);var hf={basic:cf,inverse:ff,full:ff,compact:ff,funky:Xe(function(e){return{tileHeight:e.props.tileHeight}})(pf),default:cf},df=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=xi(),r.forwardedPropsKeys=Object.keys(r.constructor.propsToForward),r}return f(t,r.PureComponent),a(t,[{key:"dispatchEvent",value:function(e){this.el.current.dispatchEvent(e)}},{key:"render",value:function(){var e,t,r,o,i=this.props,s=i.layout,a=h(i,["layout"]);if(s in hf){var u=hf[s],l=(e=a,t=this.constructor.propsToForward,r={},o=e,_i(t,function(e,t){var n=function(e,t){var r={},n={};return _i(o,function(e,o){if(o in t){var i=t[o];r[i===$s?o:i]=e}else n[o]=e}),{forward:r,other:n}}(0,e);r[t]=n.forward,o=n.other}),{forward:r,other:o}),f=l.forwardProps,p=l.otherProps;return n.createElement("div",c({el:this.ref},p),n.createElement(u,c({},f,{forwardedPropsKeys:this.forwardedPropsKeys})))}console.error("$this.props.layout} is invalid. Please use one of ".concat(Object.keys(hf)))}}]),t}();u(df,"propsToForward",{sequenceViewerProps:{showModBar:$s,onResidueMouseEnter:$s,onResidueMouseLeave:$s,onResidueClick:$s,onResidueDoubleClick:$s,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY"},labelsProps:{labelComponent:$s,labelStyle:$s,labelAttributes:$s},positionBarProps:{markerSteps:$s,markerStartIndex:"startIndex",markerComponent:$s,markerStyle:$s,markerAttributes:$s},overviewBarProps:{barMethod:"method",barFillColor:"fillColor",barComponent:$s,barStyle:$s,barAttributes:$s}}),df.defaultProps={layout:"default"},df.propTyes={layout:t.oneOf(Object.keys(hf))};var vf={onResidueClick:"residueClick"},yf=function(e){function t(e){var r;return i(this,t),(r=v(this,p(t).call(this,e))).el=xi(),r._setupStores(),r.createDomHandler=Io(r.createDomHandler.bind(d(d(r)))),r.forwardProps=su(function(e){return Ls(e,["msaStore"])},r.forwardProps.bind(d(d(r)))),r}return f(t,r.Component),a(t,[{key:"_setupStores",value:function(){var e=this;this.positionStore=je(Zi),this.positionStore.dispatch(Gi.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe(function(){e.positionStore.dispatch(Gi.updateMainStore(e.props.msaStore.getState()))})}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"createDomHandler",value:function(e){var t=this;return function(r){var n=new CustomEvent(e,{detail:r,bubbles:!0});t.el.current.dispatchEvent(n)}}},{key:"forwardProps",value:function(e){var t=this,r=l({},e);return _i(vf,function(e,n){n in vf&&!(n in r)&&(r[n]=t.createDomHandler(e))}),r}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.msaStore,o=h(e,["children","msaStore"]);return t?n.createElement(hi,{store:r},n.createElement("div",c({},o,{ref:this.el}),t)):n.createElement(hi,{store:r},n.createElement("div",{ref:this.el},n.createElement(df,this.forwardProps(o))))}}]),t}();yf.childContextTypes={positionMSAStore:t.object},yf.propTypes={sequences:t.arrayOf(gn).isRequired,width:t.number,height:t.number,tileWidth:t.number,tileHeight:t.number,position:wn,colorScheme:mn,onResidueMouseEnter:t.func,onResidueMouseLeave:t.func,onResidueClick:t.func,onResidueDoubleClick:t.func,layout:t.oneOf(["basic","default","inverse","full","compact","funky"]),sequenceBorder:t.bool,sequenceBorderColor:t.string,sequenceBorderWidth:t.number,sequenceTextColor:t.string,sequenceTextFont:t.string,sequenceOverflow:t.oneOf(["hidden","auto","scroll"]),sequenceOverflowX:t.oneOf(["hidden","auto","scroll","initial"]),sequenceOverflowY:t.oneOf(["hidden","auto","scroll","initial"]),sequenceScrollBarPositionX:t.oneOf(["top","bottom"]),sequenceScrollBarPositionY:t.oneOf(["left","right"]),labelComponent:t.oneOfType([t.object,t.func]),labelStyle:t.object,labelAttributes:t.object,markerSteps:t.number,markerStartIndex:t.number,markerComponent:t.oneOfType([t.object,t.func]),markerStyle:t.object,markerAttributes:t.object,barMethod:t.oneOf(["information-content","conservation"]),barFillColor:t.string,barStyle:t.object,barAttributes:t.object,msaStore:t.object};var bf,gf,mf=(bf=yf,gf=function(e){function t(e){var r;i(this,t),r=v(this,p(t).call(this,e));var n=mi(e,Ns)||{};return r.el=xi(),r.msaStore=e.msaStore,void 0!==n.sequences?r.msaStore=pi(n):console.warn("Check your MSA properties",n),r}return f(t,r.Component),a(t,[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(e){var t=this.props;for(var r in mi(t,Ns))if(!Is(e[r],t[r]))if("position"===r)this.updatePosition(t[r]);else if(r in Vs){var n=void 0;switch(Vs[r]){case"updateProp":n=kn[Vs[r]](r,t[r]);break;default:n=kn[Vs[r]](t[r])}this.msaStore.dispatch(n)}else console.error(r," is unknown.")}},{key:"dispatch",value:function(e){if(e.type in Xs)this.msaStore.dispatch(e);else{if(!(e.type in Us))throw new Error("Invalid action",e);this.el.current.positionStore.dispatch(e)}}},{key:"render",value:function(){var e=Ls(this.props,Ns),t=e.msaStore,r=h(e,["msaStore"]);return void 0===this.msaStore?n.createElement("div",null," Error initializing the MSAViewer. "):n.createElement(bf,c({ref:this.el,msaStore:t||this.msaStore},r))}}]),t}(),_i(kn,function(e,t){gf.prototype[t]=function(t){this.msaStore.dispatch(e(t))}}),_i(Gi,function(e,t){gf.prototype[t]=function(t){var r=this;zs(this,function(){r.el.current.positionStore.dispatch(e(t))})}}),gf);mf.defaultProps=Sn,mf.propTypes=l({},yf.propTypes),yf.propTypes=Ls(yf.propTypes,b(Object.keys(_n)).concat(["sequences","position"]));var wf=l({},kn,Gi);e.autobind=au,e.actions=wf,e.ColorScheme=yn,e.createMSAStore=pi,e.msaConnect=Xe,e.MSAProvider=hi,e.MSAViewer=mf,e.shallowSelect=su,e.shallowEqual=iu,e.withPositionStore=Ci,e.version="1.0.1",e.default=mf,e.Labels=pu,e.OverviewBar=xu,e.PositionBar=yu,e.SequenceOverview=Xu,e.SequenceViewer=Vu,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map